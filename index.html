<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktywne Porównanie Ofert Noclegowych - Zakopane</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Leaflet CSS for map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha2d1-ZSpT5+PlfR/uOaD3X9bKkYJ7Qf/3NqE5B2U5fP5p6Nf+KxLz/uU6Z3/oXw2+Z2u+" crossorigin=""/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals & Deep Forest Green -->
    <!-- Application Structure Plan: A single-page dashboard designed for decision-making. The structure prioritizes user interaction over mirroring the source report's linear flow. It consists of: 1. A global navigation bar for quick scrolling. 2. A powerful control panel with sorting and filtering options (by price, distance, amenities, availability), which is the primary interaction hub. 3. An interactive grid of "offer cards" that dynamically updates based on user selections, presenting key information concisely. 4. A visualization section with bar charts for at-a-glance comparison of price and location trade-offs. 5. A map visualization section showing accommodation locations. 6. A final summary and recommendations section to guide the user's choice. This task-oriented design empowers the user to explore the data according to their personal priorities (e.g., "show me the cheapest available options with a jacuzzi"), making the complex data from the report easily digestible and comparable. -->
    <!-- Visualization & Content Choices: The core of the application is the transformation of static report entries into interactive elements. Report Info: Each accommodation offer. Goal: Compare options based on multiple criteria. Viz/Presentation Method: An interactive card grid (HTML/Tailwind/JS) including a "Pokaż Konwersację" button that opens a modal displaying the chat transcript. Interaction: Users can filter and sort the cards. Clicking the button opens a fullscreen modal for reading chat content. Justification: Cards are more flexible and mobile-friendly than a static table, allowing for a clearer presentation of varied information. Chat transcripts provide direct context for data. Report Info: Price and Distance data. Goal: Provide a high-level visual summary of key trade-offs. Viz/Presentation Method: Two separate bar charts (Chart.js/Canvas). Interaction: Tooltips on hover provide exact values. Justification: Bar charts are ideal for comparing discrete values across different categories, making the cost-vs-location dilemma immediately apparent. Report Info: Geographic locations of accommodations. Goal: Provide visual context of proximity to Krupówki and other points. Viz/Presentation Method: Interactive Map (Leaflet.js/Canvas-based tiles). Interaction: Users can pan, zoom, and click markers for info. Justification: A map is essential for understanding spatial relationships and travel implications, directly addressing the user's need for location comparison. All interactions are handled by vanilla JavaScript, ensuring a lightweight and fast experience. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8; /* Warm off-white */
            color: #383838;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 450px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .nav-link {
            transition: color 0.3s;
        }
        .nav-link:hover {
            color: #2F5233; /* Dark Green */
        }
        .filter-btn, .sort-select {
            transition: all 0.3s;
        }
        .filter-btn.active {
            background-color: #4A7856; /* Green */
            color: #ffffff;
            border-color: #4A7856;
        }
        .card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Modal styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.8); /* Black w/ opacity */
            align-items: center;
            justify-content: center;
        }
        .modal-content-chat {
            background-color: #ffffff;
            margin: auto;
            padding: 2rem;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); /* shadow-2xl */
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .modal-close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
        }
        .modal-close:hover,
        .modal-close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }
        .chat-message {
            padding: 0.75rem;
            border-radius: 0.5rem;
            max-width: 80%;
            word-wrap: break-word;
        }
        .chat-user {
            background-color: #e0f2f1; /* Light green */
            align-self: flex-end;
            margin-left: auto;
        }
        .chat-owner {
            background-color: #f0f0f0; /* Light gray */
            align-self: flex-start;
            margin-right: auto;
        }
        /* Map container specific styles */
        #map {
            height: 500px; /* Default height */
            width: 100%;
        }
        @media (min-width: 768px) {
            #map {
                height: 600px; /* Taller on larger screens */
            }
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold text-[#2F5233]">Noclegi Zakopane 2025</h1>
            <div class="hidden md:flex space-x-6 text-gray-600 font-medium">
                <a href="#porownanie" class="nav-link">Porównanie</a>
                <a href="#wizualizacje" class="nav-link">Wykresy</a>
                <a href="#mapa" class="nav-link">Mapa</a>
                <a href="#podsumowanie" class="nav-link">Podsumowanie</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-8 md:py-12">
        <section id="intro" class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold mb-4">Znajdź Idealny Nocleg na Wakacje</h2>
            <p class="max-w-3xl mx-auto text-gray-600">
                Ta interaktywna strona pomoże Ci porównać zweryfikowane oferty noclegowe w Zakopanem i okolicach na termin 26.07 - 02.08.2025 dla 8 osób. Użyj filtrów i sortowania, aby znaleźć opcję najlepiej dopasowaną do Twoich potrzeb. Dane pochodzą z analizy ofert i rozmów z właścicielami.
            </p>
        </section>

        <section id="porownanie" class="scroll-mt-24">
            <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8 mb-10">
                <h3 class="text-2xl font-bold mb-6">Filtruj i Sortuj Oferty</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="md:col-span-2">
                        <label class="block text-sm font-semibold mb-2 text-gray-700">Filtruj wg dostępności:</label>
                        <div id="availability-filter" class="flex flex-wrap gap-2">
                            <button data-filter="Dostępny" class="filter-btn text-sm font-medium py-2 px-4 rounded-full border border-gray-300 bg-white">✅ W pełni dostępne</button>
                            <button data-filter="Częściowo" class="filter-btn text-sm font-medium py-2 px-4 rounded-full border border-gray-300 bg-white">⚠️ Częściowo dostępne</button>
                            <button data-filter="Wymaga Potwierdzenia" class="filter-btn text-sm font-medium py-2 px-4 rounded-full border border-gray-300 bg-white">❓ Wymaga potwierdzenia</button>
                            <button data-filter="Brak Danych" class="filter-btn text-sm font-medium py-2 px-4 rounded-full border border-gray-300 bg-white">⛔ Brak Danych</button>
                        </div>
                    </div>
                    <div>
                        <label for="sort-by" class="block text-sm font-semibold mb-2 text-gray-700">Sortuj według:</label>
                        <select id="sort-by" class="sort-select w-full p-2.5 border border-gray-300 rounded-lg bg-gray-50 focus:ring-2 focus:ring-[#4A7856] focus:border-[#4A7856] outline-none">
                            <option value="price_asc">Cena: od najniższej</option>
                            <option value="price_desc">Cena: od najwyższej</option>
                            <option value="dist_asc">Odległość: od najbliższej</option>
                            <option value="dist_desc">Odległość: od najdalszej</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="offers-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
            </div>
        </section>

        <section id="wizualizacje" class="mt-16 scroll-mt-24">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12">Wizualne Porównanie Ofert</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                    <h3 class="text-xl font-bold text-center mb-4">Porównanie Ceny Całkowitej (7 nocy)</h3>
                    <p class="text-center text-sm text-gray-500 mb-6">Dotyczy ofert z potwierdzoną ceną.</p>
                    <div class="chart-container">
                        <canvas id="priceChart"></canvas>
                    </div>
                </div>
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                    <h3 class="text-xl font-bold text-center mb-4">Szacowana Odległość od Krupówek</h3>
                     <p class="text-center text-sm text-gray-500 mb-6">Dotyczy ofert ze znaną lokalizacją.</p>
                    <div class="chart-container">
                        <canvas id="distanceChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="mapa" class="mt-16 scroll-mt-24">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12">Mapa Ofert Noclegowych</h2>
            <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">
                Poniżej znajduje się interaktywna mapa z zaznaczonymi przybliżonymi lokalizacjami noclegów. Centrum mapy to Krupówki w Zakopanem. Kliknij na markery, aby zobaczyć nazwę obiektu.
            </p>
            <div id="map" class="h-[500px] w-full rounded-2xl shadow-lg"></div>
        </section>

        <section id="podsumowanie" class="mt-16 scroll-mt-24">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12">Podsumowanie i Rekomendacje</h2>
            <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                 <div class="space-y-8">
                    <div>
                        <h3 class="text-xl font-bold mb-3 text-[#2F5233]">Kluczowe Wnioski</h3>
                        <p class="text-gray-600">Analiza ofert pokazuje, że kluczowe jest bezpośrednie potwierdzanie ceny i dostępności, ponieważ informacje w ogłoszeniach często są nieaktualne. Wybór sprowadza się do kompromisu między ceną, lokalizacją (i kosztami dojazdów) a dostępnymi udogodnieniami, które mogą znacząco podnieść komfort pobytu.</p>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold mb-3 text-[#2F5233]">Najbardziej Obiecujące Oferty</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                           <li><span class="font-semibold">Domek z jacuzzi blisko Term Chochołowskich:</span> Najlepszy stosunek ceny do udogodnień (jacuzzi, klimatyzacja). Idealny dla grupy ceniącej relaks, nawet kosztem dojazdów do centrum Zakopanego.</li>
                           <li><span class="font-semibold">Domek 12-osobowy:</span> Oferuje najwięcej przestrzeni i komfortu dla 8-osobowej grupy w dobrej cenie, co może być dużą zaletą podczas dłuższego pobytu.</li>
                           <li><span class="font-semibold">Domek 8-osobowy w Chochołowie:</span> Solidna opcja z w pełni potwierdzoną dostępnością i ceną, dobra jako punkt wyjścia do negocjacji lub pewny wybór, jeśli inne opcje zawiodą.</li>
                           <li><span class="font-semibold">Apartamenty Jaworowe Izby z balią:</span> Potwierdzona cena i atrakcyjne udogodnienia, choć wymaga rozwiązania kwestii 26 lipca.</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold mb-3 text-[#2F5233]">Praktyczne Porady</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                           <li><strong>Zawsze potwierdzaj cenę całkowitą:</strong> Dopytaj o wszystkie dodatkowe opłaty (klimatyczna, za media, sprzątanie).</li>
                           <li><strong>Weryfikuj dokładną lokalizację:</strong> Użyj mapy, aby ocenić realny czas i koszt dojazdów do Krupówek i innych atrakcji.</li>
                           <li><strong>Określ priorytety grupy:</strong> Zdecydujcie, co jest ważniejsze – bliskość centrum, cisza i widoki, czy dostęp do basenu/jacuzzi.</li>
                        </ul>
                    </div>
                 </div>
            </div>
        </section>

    </main>

    <!-- The Modal for chat conversation -->
    <div id="chatModal" class="modal fixed inset-0 flex items-center justify-center p-4" style="display: none;">
        <span class="modal-close">&times;</span>
        <div class="modal-content-chat">
            <h3 class="text-xl font-bold text-center mb-4 text-[#2F5233]" id="chatModalTitle"></h3>
            <div id="chatMessages" class="flex flex-col gap-3">
                <!-- Chat messages will be dynamically inserted here -->
            </div>
        </div>
    </div>

<!-- Leaflet JavaScript -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha2d1-oXq/5+Fz/3NqE5B2U5fP5p6Nf+KxLz/uU6Z3/oXw2+Z2u+" crossorigin=""></script>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const accommodationData = [
        { id: 1, 
         title: 'Domek 8-osobowy CHOCHOŁÓW', 
         link: 'https://www.olx.pl/d/oferta/domek-zakopane-8osobowy-wynajem-chochol-CID1816-IDY2Pra.html', 
         totalPrice: 5600, 
         availability: 'Dostępny', 
         status: 'Pełna dostępność i cena potwierdzona.', 
         capacity: 8, amenities: [], 
         location: 'Chochołów', 
         distance: 20.5, 
         notes: 'Dostępny w terminie 25.07-02.08.2025 dla 7 dorosłych i 1 dziecka.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Tak jest dostepny' },
            { sender: 'user', message: 'W jakiej cenie?' },
            { sender: 'owner', message: 'Cena w okresie wakacji 800zł doba w sumie 5600zł za 7 nocy' }
        ], latitude: 49.355418, longitude: 19.819255 },
        { id: 2, 
         title: 'Apartamenty Zakopane Wakacje Sierpień Weekendy', 
         link: 'https://www.olx.pl/d/oferta/apartamenty-zakopane-wakacje-sierpien-weekendy-CID1816-ID16307m.html', 
         totalPrice: 3920, 
         availability: 'Dostępny', 
         status: 'Cena i dostępność potwierdzona.', 
         capacity: 8, 
         amenities: ['Piękne widoki', 'Panorama Tatr'], 
         location: 'Murzasichle', 
         distance: 11.4, 
         notes: 'Cena 70 zł od osoby za dobę. W drugim budynku.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025-02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Witam mamy w drugim budynku bardzo piękne widoki cała panorama Tatr w Murzasichle strona www.utrebuni.pl' },
            { sender: 'user', message: 'W jakiej cenie?' },
            { sender: 'owner', message: 'Tak wynajem jest możliwy 70 zł od osoby więcej informacji pod numerem tel 728 739 080 pozdrawiam' }
        ], latitude: 49.303838, longitude: 20.036490 },
        { id: 3, 
         title: 'WAKACJE! BASEN, JACUZZI, sauna i parking - w cenie!', 
         link: 'https://www.olx.pl/d/oferta/wakacje-basen-jacuzzi-sauna-i-parking-w-cenie-CID1816-IDvrPqn.html', 
         totalPrice: 3850, 
         availability: 'Częściowo', 
         status: 'Cena potwierdzona, termin nie pokrywa się w pełni.', 
         capacity: 8, amenities: ['Basen', 'Siłownia', 'Jacuzzi', 'Plac zabaw', 'Sauna', 'Grota solna', 'Parking'], 
         location: 'Zakopane', 
         distance: 2.0, 
         notes: 'Dostępne tylko 27.07-01.08.2025. Cena 550 zł za dobę.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? Goście: dorośli (7) dzieci (1), niemowlęta (0).' },
            { sender: 'owner', message: 'Witam mam wolny apartamenty. Dziecko ile lat?' },
            { sender: 'user', message: 'Dziecko 10 lat' },
            { sender: 'owner', message: 'Mogę zaproponować apartament 1. Cena 8os-550 zł doba Apartament ma 7 miejsc do spania, dodatkowo możemy dostawić materac.' },
            { sender: 'owner', message: 'Apartament 1 (niski parter/przyziemie) - w cenie parking, basen, siłownia, jacuzzi, plac zabaw.' },
            { sender: 'owner', message: 'Ewentualnie 2 apartamenty w tym samym budynku (byłyby to apartamenty 2 i 3)ale w terminie 27.07-01.08' },
            { sender: 'owner', message: 'Lub inna opcja Apartamenty 1 i 2- oddalone od siebie 10min spacerem, w terminie też 27.07-01.08' },
            { sender: 'owner', message: 'Apartament 1 (niski parter/przyziemie) - w cenie parking, basen, siłownia, jacuzzi, plac zabaw.  Apartament 2 (z tarasem) - z możliwością korzystania z sauny i groty solnej na wyłączność. Apartament 3 (z balkonem) - w cenie parking, altanka, plac zabaw.' }
        ], latitude: 49.279274, longitude: 19.908976 }, 
        { id: 4, 
         title: 'Apartamenty Jaworowe Izby z balią z hydromasażem', 
         link: 'https://www.olx.pl/d/oferta/apartamenty-jaworowe-izby-z-balia-z-hydromasazem-CID1816-ID15UskW.html', 
         totalPrice: 3100, 
         availability: 'Częściowo', 
         status: 'Cena potwierdzona, 26.07 zarezerwowany.', 
         capacity: 8, 
         amenities: ['Balia z hydromasażem', 'Grill', 'Plac zabaw', 'Hamak', 'Huśtawki', 'Trampolina', 'Bramki do piłki nożnej', 'PlayStation', 'WiFi', 'Parking'], 
         location: 'Zakopane', 
         distance: 2.5, 
         notes: 'Dostępny od 27.07 do 02.08.2025. Całkowita cena 3100 zł.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? Goście: dorośli (7), dzieci (1), niemowlęta (0)' },
            { sender: 'owner', message: 'Dzień dobry, 26 lipca jest zarezerwowany, ale od 27 lipca do 2 sierpnia jak najbardziej zapraszamy :)' },
            { sender: 'user', message: 'w jakiej cenie?' },
            { sender: 'owner', message: 'A w jakim wieku jest dziecko?' },
            { sender: 'user', message: '10 lat' },
            { sender: 'owner', message: 'To będzie 3100 zł, w cenie macie dwie sypialnie, dwie łazienki oraz oddzielna część jadalniana z aneksem kuchennym, w cenie również cały tydzień balia z hydromasażem, grill, plac zabaw (hamak, huśtawki, trampolina, bramki do piłki nożnej), PlayStation, WiFi, parking :)' },
            { sender: 'user', message: 'W razie pytań proszę o kontakt 506014406 :)' }
         ], latitude: 49.2950, longitude: 19.9500 }, 
        { id: 5, 
         title: 'BOŻE CIAŁO!! Wakacje!! Ostatnie wolne pokoje!!', 
         link: 'https://www.olx.pl/d/oferta/boze-cialo-wakacje-ostatnie-wolne-pokoje-CID1816-IDKmdfh.html', 
         totalPrice: null, 
         availability: 'Wymaga Potwierdzenia', 
         status: 'Wymaga dalszego kontaktu w celu potwierdzenia dostępności i ceny.', 
         capacity: 8, 
         amenities: [], 
         location: 'Zakopane', 
         distance: 1.0, 
         notes: 'Brak potwierdzenia ceny i dostępności w konwersacji.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Witam, proszę o informację ile lat ma dziecko i ile pokoi Państwo potrzebują (ilu osobowe)' },
            { sender: 'owner', message: 'A najlepiej jakby Pan zadzwonił (660177174)' }
        ], latitude: 49.2991, longitude: 19.9575 }, 
        { id: 6, 
         title: 'Domek góralski Wooden Tatra House', 
         link: 'https://www.olx.pl/d/oferta/domek-goralski-wooden-tatra-house-CID1816-ID16iUMx.html', 
         totalPrice: 6230, 
         availability: 'Dostępny', 
         status: 'Cena całkowita i dostępność potwierdzona.', 
         capacity: 8, 
         amenities: [], 
         location: 'Zakopane', 
         distance: 3.0, 
         notes: 'Dostępny 26.07-02.08.2025. Całkowita cena 6230 zł.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? Goście: dorośli (7), dzieci (1), niemowlęta (0)' },
            { sender: 'owner', message: 'Dzień dobry tak jest dostępny domek w tym terminie , kwota to 6230 zł pozdrawiam serdecznie' }
        ], latitude: 49.282518, longitude: 19.912964 }, 
        { id: 7, 
         title: 'Zakopane domek 12 osobowy wakacje święta ferie', 
         link: 'https://www.olx.pl/d/oferta/zakopane-domek-12-osobowy-wakacje-swieta-ferie-CID1816-IDL9SkM.html?reason=seller_profile', 
         totalPrice: 5600, 
         availability: 'Dostępny', 
         status: 'Cena i dostępność potwierdzona.', 
         capacity: 12, 
         amenities: [], 
         location: 'Zakopane', 
         distance: 1.8, 
         notes: 'Dostępny 26.07-02.08.2025. Cena 800 zł za dobę. Oferuje więcej miejsca niż wymagane.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'owner', message: 'Dla ilu osób potrzeba' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Termin wolny 800 zł za dobę' }
        ], latitude: 49.2970, longitude: 19.9650 }, 
        { id: 8, 
         title: 'Domek k/ Zakopane, widoki na góry, jacuzzi prywatne', 
         link: 'https://www.olx.pl/d/oferta/domek-k-zakopane-widoki-na-gory-jacuzzi-prywatne-CID1816-IDFikla.html', 
         totalPrice: 5950, 
         availability: 'Częściowo', 
         status: 'Termin nie pokrywa się w pełni. Cena jacuzzi dodatkowo płatna.', 
         capacity: 8, 
         amenities: ['Widoki na góry', 'Prywatne jacuzzi (dodatkowo płatne)'], 
         location: 'Koło Zakopanego', 
         distance: 5.0, 
         notes: 'Dostępny tylko 30.07-03.08.2025. Cena za dobę 850 zł + opłata za jacuzzi.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Witam serdecznie domek mamy wolny w terminie 30.07-03.08 Cena za dobę 850 zł, jeżeli chcieliby Państwo dodatkowo skorzystać z jacuzzi wtedy jest dodatkowa opłata 250 zł za dwa kolejne dni każdy następny po sobie dzień 50 zł - jacuzzi jest prywatne i nagrzewane tylko na życzenie Gości' }
        ], latitude: 49.2800, longitude: 19.9200 }, 
        { id: 9, 
         title: 'Domek z jacuzzi, balia na wyłączność Termy Chochołów domek Zakopane', 
         link: 'https://www.olx.pl/d/oferta/domek-z-jacuzzi-balia-na-wylacznosc-termy-chocholow-domek-zakopane-CID1816-ID15S2Bp.html', 
         totalPrice: 4200, 
         availability: 'Dostępny', 
         status: 'Pełna dostępność i cena potwierdzona.', 
         capacity: 8, 
         amenities: ['Jacuzzi', 'Balia na wyłączność', 'Klimatyzacja'], 
         location: 'blisko Term Chochołów', 
         distance: 20.5, 
         notes: 'Dostępny 26.07-02.08.2025. Cena 600 zł za dobę. 400m od Term Chochołowskich.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? Goście: dorośli (7), dzieci (1), niemowlęta (0).' },
            { sender: 'owner', message: 'Dzień dobry dziękuję za zainteresowanie naszą ofertą mamy wolny domek z 3 sypialniami 600 zł doba domek z klimatyzacja 400 m od term' }
        ], latitude: 49.3360, longitude: 19.8660 }, 
        { id: 10, 
         title: 'Domki Zakopane domek w górach góry apartamenty noclegi kwatery pokoje', 
         link: 'https://www.olx.pl/d/oferta/domki-zakopane-domek-w-gorach-gory-apartamenty-noclegi-kwatery-pokoje-CID1816-IDJ3aCB.html', 
         totalPrice: 3150, 
         availability: 'Dostępny', 
         status: 'Pełna dostępność i cena potwierdzona.', 
         capacity: 8, 
         amenities: ['Grill', 'Plac zabaw', 'Wi-Fi', 'TV', 'Kuchnia', 'Łazienka', 'Parking', 'Akceptacja zwierząt'], 
         location: 'Gliczarów Górny, ul. Fiskowa Dolina 20', 
         distance: 11.4, 
         notes: 'Brak jednoznacznego potwierdzenia ceny i dostępności w czacie.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? Goście: dorośli (7), dzieci (1), niemowlęta (0).' },
            { sender: 'owner', message: 'Witamy. Na razie jest  wolny DOMEK GÓRALSKI z Bali np. od już 24 lipca ale do 1 sierpnia.  Cały domek na wyłączność dla Państwa. Cena 450 zł za noc, za wszystkie osoby (a nie za osobę), za cały jeden Domek do 8 osób, (spało też więcej osób). W pobliżu są TERMY - (baseny, gorące źródła, SPA), sklepy, karczmy, itd.  Obok jest Wyciąg - Stok Narciarki, restauracja i górki do zjeżdżania  dla dzieci. Domek w pełni wyposażony: Wi-Fi, TV, na zewnątrz grill, plac zabaw dla dzieci, kuchnia, łazienka. Parking na dwa samochody do domku - gratis. Akceptujemy pieski. Rezerwacja 40% wpłaty.  Adres: Gliczarów Górny ul. Fiśkowa Dolina 20, koło Zakopanego przy Bukowinie Tatrzańskiej.  W razie pytań i rezerwacji proszę o kontakt tel. 790,_303,_500.Po więcej zdjęć i informacji zapraszamy na stronę: www.Wgorachdomki.pl  Pozdrawiamy "Domki w Górach pod Wyciągiem"' }
        ], latitude: 49.3490, longitude: 20.0800 }, 
        { id: 11, 
         title: 'Pokoje noclegi Zakopane, apartamenty', 
         link: 'https://www.olx.pl/d/oferta/pokoje-noclegi-zakopane-apartamenty-CID1816-ID15BqqL.html', 
         totalPrice: 3843, 
         availability: 'Brak Danych', 
         status: 'Pełna dostępność i cena potwierdzona.', 
         capacity: 8, 
         amenities: [], 
         location: 'Zakopane', 
         distance: 1.5, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? Goście: dorośli (7), dzieci (1), niemowlęta (0).' },
            { sender: 'owner', message: 'Tak jest możliwy ilu osobowe pokoje potrzeba' },
            { sender: 'user', message: 'Najlepiej dwa dwuosobowe i jeden czteroosobowy ale jeśli dostępne są inne to jesteśmy elastyczni pod tym względem :)' },
            { sender: 'owner', message: 'Wolny Apartament 4 os 2 pomieszczenia z wyposażona kuchnią widokowy taras na góry piękny widok tv internet cena 275zl doba za 4os.Pokoje 2os każdy z łazienką widokowy balkon na góry do dyspozycji na korytarzu aneks oraz kuchnia TV Internet grill parking plac zabaw cena 137zl doba za pokój 2os.' }
        ], latitude: 49.2991, longitude: 19.9575 }, 
        { id: 12, 
         title: 'Willa Monia - Zakopane Pardałówka 15-20 min. spacerkiem do Krupówek', 
         link: 'https://www.olx.pl/d/oferta/willa-monia-zakopane-pardalowka-15-20-min-spacerkiem-do-krupowek-CID1816-ID15zggt.html', 
         totalPrice: 7070, 
         availability: 'Dostępny', 
         status: 'Cena i dostępność potwierdzona.', 
         capacity: 8, 
         amenities: [], 
         location: 'Zakopane Pardałówka', 
         distance: 1.5, 
         notes: 'Cena 130 zł/osoba dorosła, 100 zł/dziecko za dobę. Ok. 15-20 min. spacerkiem do Krupówek.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025-02 sie, 2025 (7 nocy)? Goście: dorośli (7), dzieci (1) niemowlęta (0)' },
            { sender: 'owner', message: 'W podanym terminie mamy dostępne 3 pokoje 2 osobowe z łóżkami małżeńskimi + jedno z pojedynczym łóżkiem. Koszt 130 zł od osoby dorosłej za dobę, dziecko do 12 roku życia 100 zł za dobę. W cenie wliczone jest śniadanie w formie szwedzkiego stołu. Zapraszamy!' }
        ], latitude: 49.3039, longitude: 19.9880 },
        { id: 13, 
         title: 'Zakopane, pokoje z łazienką, blisko centrum, Krupówki, do skoczni 300m', 
         link: 'https://www.olx.pl/d/oferta/zakopane-pokoje-z-lazienka-blisko-centrum-krupowki-do-skoczni-300m-CID1816-IDYCqId.html', 
         totalPrice: 4480, 
         availability: 'Dostępny', 
         status: 'Cena i dostępność potwierdzona.', 
         capacity: 8, 
         amenities: ['Łazienka', 'Halling'], 
         location: 'Zakopane, blisko centrum', 
         distance: 0.3, 
         notes: 'Cena 80 zł/osoba za dobę. Do skoczni 300m, blisko Krupówek.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025-02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Witam. Mamy wolne pokoje w tym terminie w cenie 80 zł/osoba za dobę. Dla gości zmotoryzowanych mamy halling przy budynku, w tej cenie. W ofercie wcześniej innych zapytał, chciałbym prosić o użycie bezpośredniego kontaktu (jeśli RODO nie trafi). Pozdrawiam Leszek Medowski' }
        ], latitude: 49.2980, longitude: 19.9580 }, 
        { id: 14, 
         title: 'WAKACJE-Apartament 2-10os, Blisko Centrum, Dworca PKP,PKS, Widok TATRY', 
         link: 'https://www.olx.pl/d/oferta/wakacje-apartament-2-10os-blisko-centru-m-dworca-pkp-pks-widok-tatry-CID1816-IDQrv4l.html', 
         totalPrice: null, 
         availability: 'Wymaga Potwierdzenia', 
         status: 'Brak potwierdzenia ceny w konwersacji. Proszono o kontakt telefoniczny.', 
         capacity: '2-10 osób', 
         amenities: ['Widok TATRY'], 
         location: 'Blisko Centrum, Dworca PKP, PKS', 
         distance: 0.8, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025-02 sie, 2025 (7 nocy)? Goście: dorośli (7), dzieci (1) niemowlęta (0)' },
            { sender: 'owner', message: 'Jest wolny proszę dzwonić na 500704655' }
        ], latitude: 49.2970, longitude: 19.9670 }, 
        { id: 15, 
         title: 'U Sobali - apartament z widokiem oraz pokoje gościnne, Ul. Mrowce 14', 
         link: 'https://www.olx.pl/d/oferta/u-sobali-apartament-z-widokiem-oraz-po-koje-goscinne-ul-mrowce-14-CID1816-IDzQfs5.html', 
         totalPrice: 3360, 
         availability: 'Dostępny', 
         status: 'Cena potwierdzona (dla kombinacji pokoi), dostępność potwierdzona.', 
         capacity: 8, 
         amenities: ['Widok'], 
         location: 'Ul. Mrowce 14', 
         distance: 3.5, 
         notes: 'Oferowane są pokoje 2os (125zł/dobę) i 4os (230zł/dobę). Cena obliczona dla 2 pokoi 2-osobowych i 1 4-osobowego.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)? Goście: dorośli (7), dzieci (1), niemowlęta (0).' },
            { sender: 'owner', message: 'A jakie Pokoje (ilu osobowe) Państwo potrzebują?' },
            { sender: 'user', message: 'Najlepiej 2 dwuosobowe i 1 czteroosobowy ale jesteśmy elastyczni pod tym względem :)' },
            { sender: 'owner', message: 'Dysponujemy  w tym terminie  pokojem  4 os z łazienką  w  cenie  230 zł za dobę od  całej rodziny  oraz 2 x 2 os z łazienkami  w cenie  125 zł za dobę  za jeden pokój Pozdrawiam' }
        ], latitude: 49.2700, longitude: 19.9500 }, 
        { id: 16, 
         title: 'Wynajem Pokoi Gościnnych "Nowa Grań"', 
         link: 'https://www.olx.pl/d/oferta/wynajem-pokoi-goscinnych-nowa-gran-CID1816-IDWLyHh.html', 
         totalPrice: 4200, 
         availability: 'Częściowo', 
         status: 'Cena i częściowa dostępność potwierdzona.', 
         capacity: 8, 
         amenities: ['Łazienki', 'Balkony z widokiem'], 
         location: 'Zakopane', 
         distance: 2.2, 
         notes: 'Dostępne, dużo informacji w konwersacji.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?,' },
            { sender: 'user', message: 'Dla 7 osob dorosłych i jednego dziecka(10 lat)' },
            { sender: 'owner', message: 'Witam. A czy mogłoby być od 27 lipca? Czy termin jest potrzebny konkretnie od 26?' },
            { sender: 'user', message: 'Wolelibyśmy od 26' },
            { sender: 'owner', message: 'Rozumiem, mam dostępne pokoje ale od 27 lipca' },
            { sender: 'user', message: 'W jakiej cenie były by te pokoje w takim razie od 27.07 do 03.08?' },
            { sender: 'owner', message: 'Od 26 lipca mam 2x pokój 2 osobowy oraz czteroosobowy. Cena w tym przypadku 75zł za osobę za dobę.😊 Nie są to pokoje z pokojami głoszenia (pokoje są bez balkonów)' },
            { sender: 'owner', message: 'A od 27 lipca mam pokoje z ogłoszenia również 2x dwuosobowego i czteroosobowy. Cena za 4 osobowy 300zł za dobę za pokój, a cena pokoju 2 osobowego 180zł za pokój za dobę. Pokoje z prywatnymi łazienkami, balkonami z widokiem na góry😊' },
            { sender: 'owner', message: 'Oraz w obu opcjach kuchnia ogólnodostępna z ekspresem do kawy, piekarnikiem itd.' },
            { sender: 'owner', message: 'Za cały pobyt: 1 opcja po zsumowaniu 4200zł, 2 opcja 4620zł. Zapraszam serdecznie Adres: ul.Pardałówka 60, Zakopane' }
        ], latitude: 49.3010, longitude: 19.9600 }, 
        { id: 17, 
         title: 'Drewniany domek z pięknym widokiem na Gubałówce', 
         link: 'https://www.olx.pl/d/oferta/drewniany-domek-z-pieknym-widokiem-na-gubalowce-CID1816-ID10Rmvt.html', 
         totalPrice: 6000, 
         availability: 'Dostępny', 
         status: 'Cena potwierdzona, termin częściowo pokrywa się (dostępność 26.07-03.08).', 
         capacity: null, 
         amenities: ['Piękny widok'], 
         location: 'Gubałówka', 
         distance: 4.0, 
         notes: 'Cena 6000zł w innym domku. Dostępny 26.07-03.08.2025 (8 nocy).', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? Goście: dorośli (7), dzieci (1), niemowlęta (0).' },
            { sender: 'owner', message: 'Witam. Ten domek jest wolny od 26.07 do 31.07' },
            { sender: 'owner', message: 'Ewentualnie w tym terminie mam wolny domek z pięknym widokiem kominkiem sauną i jacuzzi w Zakopanem' },
            { sender: 'owner', message: 'Zapraszam' },
            { sender: 'user', message: 'W jakiej cenie byłby ten dostępny domek?' },
            { sender: 'owner', message: '6000 zł za cały pobyt bqlia w cenie' },
        ], latitude: 49.3100, longitude: 19.9300 },
        { id: 18, 
         title: 'Nowe domki górlaskie Gubałówka Zakopane (8 osób) z widokiem- wynajem', 
         link: 'https://www.olx.pl/d/oferta/nowe-domki-gorlaskie-gubalowka-zakopa-ne-8-osob-z-widokiem-wynajem-CID1816-IDZWnxE.html', 
         totalPrice: 4900, 
         availability: 'Dostępny', 
         status: 'Cena i dostępność potwierdzona.', 
         capacity: 8, 
         amenities: ['Widok'], 
         location: 'Gubałówka', 
         distance: 4.5, 
         notes: 'Cena 700 zł/noc za domek na wyłączność.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)? Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Dzień dobry. Ten domek jest wolny w tym terminie. Cena za domek na wyłączność, wynosi w tym terminie 700 zł/noc.' }
        ], latitude: 49.3150, longitude: 19.9250 },
        { id: 19, 
         title: '"Domek u Paulinki" Zakopane Noclegi', 
         link: 'https://www.olx.pl/d/oferta/domek-u-paulinki-zakopane-noclegi-CID1816-IDv9Bfk.html', 
         totalPrice: null, 
         availability: 'Wymaga Potwierdzenia', 
         status: 'Wymaga potwierdzenia ceny i dostępności. Proszono o kontakt telefoniczny.', 
         capacity: null, 
         amenities: [], 
         location: 'Zakopane', 
         distance: 2.8, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)? Goście: dorośli (7) dzieci (1) niemowlęta (0)' },
            { sender: 'owner', message: 'Proszę o kontakt telefoniczny pod numerem: 794108159' }
        ], latitude: 49.2900, longitude: 19.9600 }, 
        { id: 20, 
         title: 'Domek u "Socków" zapraszamy na święta, majówkę i wakacje', 
         link: 'https://www.olx.pl/d/oferta/domek-u-sockow-zapraszamy-na-swieta-majowke-i-wakacje-CID1816-ID13nYkw.html', 
         totalPrice: 4550, 
         availability: 'Dostępny', 
         status: 'Cena i dostępność potwierdzona.', 
         capacity: 8, 
         amenities: [], 
         location: 'Zakopane', 
         distance: 3.2, 
         notes: 'Cena 700 zł/dobę.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)? Goście: dorośli (7), dzieci (1), niemowlęta (0)' },
            { sender: 'owner', message: 'Witam serdecznie tak mamy wolny termin cena za dobę to 700zł zapraszamy' },
             { sender: 'owner', message: 'Na zachętę ostatni nocleg  - 50 % taniej' }
        ], latitude: 49.2850, longitude: 19.9550 }, 
        { id: 21, 
         title: 'Prestige Apartamenty Bystra Woda Centrum Zakopane 1-8 osób', 
         link: 'https://www.olx.pl/d/oferta/prestige-apartamenty-bystra-woda-centrum-zakopane-1-8-osob-CID1816-IDqVpRj.html', 
         totalPrice: 5250, 
         availability: 'Dostępny', 
         status: 'Cena i dostępność potwierdzona.', 
         capacity: 8, 
         amenities: [], 
         location: 'Centrum Zakopane', 
         distance: 0.5, 
         notes: 'Cena 794 zł/doba.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)?' },
            { sender: 'owner', message: '750 złdoba' }
        ], latitude: 49.2995, longitude: 19.9585 }, 
        { id: 22, 
         title: 'Zakopane - pokoje w górach - widoki na Tatry - Parking', 
         link: 'https://www.olx.pl/d/oferta/zakopane-pokoje-w-gorach-widoki-na-tatry-parking-CID1816-IDxTx4h.html', 
         totalPrice: null, 
         availability: 'Brak Danych', 
         status: 'Brak konwersacji/danych do potwierdzenia.', 
         capacity: null, 
         amenities: ['Widoki na Tatry', 'Parking'], 
         location: 'Zakopane (w górach)', 
         distance: 6.0, 
         notes: '', 
         chatContent: [
            { sender: 'system', message: 'Brak konwersacji w pliku PDF dla tej oferty.' }
        ], latitude: 49.2700, longitude: 19.9700 }, 
        { id: 23, 
         title: 'Zapraszamy do Villa Baja wolne pokoje 3km centrum', 
         link: 'https://www.olx.pl/d/oferta/zapraszamy-do-villa-baja-wolne-pokoje-3km-centrum-CID1816-IDNv0DD.html', 
         totalPrice: 4200, 
         availability: 'Dostępny', 
         status: 'Cena i dostępność potwierdzona.', 
         capacity: 8, 
         amenities: [], 
         location: '3km od centrum', 
         distance: 3, 
         notes: 'Cena 75 zł/osoba/dobę.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? Goście: dorośli (7), dzieci (1), niemowlęta (0).' },
            { sender: 'owner', message: 'owner' },
            { sender: 'user', message: 'Jakie pokoje potrzebujecie?' },
            { sender: 'user', message: 'Najlepiej dwa dwuosobowe i jeden czterosobowy ale jesteśmy elastyczni pod tym względem :)' },
            { sender: 'owner', message: 'Posiadamy wolne pokoje' },
            { sender: 'owner', message: 'Dwa dwu osobowe oraz jeden 4 osobowy' },
            { sender: 'user', message: 'w jakiej cenie?' },
            { sender: 'owner', message: 'Z śniadaniem obiadem ?' },
            { sender: 'user', message: 'Wstępnie bez śniadań i obiadów' },
            { sender: 'owner', message: 'Na 7 nocy chcecie ?' },
            { sender: 'owner', message: '75 zł od osoby' },
            { sender: 'owner', message: 'Za nocleg' }
        ], latitude: 49.3050, longitude: 19.9400 }, 
        { id: 24, 
         title: 'Apartamenty Zakopane Najbliższe Szlaki 350m ! WOLNE ! OBIADY 25ZŁ', 
         link: 'https://www.olx.pl/d/oferta/apartamenty-zakopane-najblizsze-szlaki-350m-wolne-obiady-25zlCID1816-IDjpzbi.html', 
         totalPrice: 3780, 
         availability: 'Dostępny', 
         status: 'Dostępne.', 
         capacity: 8, 
         amenities: ['Obiady 25zł'], 
         location: 'Najbliższe Szlaki 350m', 
         distance: 0.35, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)? Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Witam tak. 270zl doba nr 14. Pozdrawiam Damian Apartamenty Dwa Niedźwiedzie.' },
            { sender: 'owner', message: 'Przepraszam zapomniałem dopisać 13 i 14 po 270 doba. Lub niżej 11 i 3 po 300zł doba. Apartamenty są dla maksymalnie 4 osób.' }
        ], latitude: 49.2985, longitude: 19.9600 }, 
        { id: 25, 
         title: 'Apartament w górach z widokiem na góry blisko term i szlaków dla rodzin', 
         link: 'https://www.olx.pl/d/oferta/apartament-w-gorach-z-widokiem-na-gory-bisko-term-i-szlakow-dla-rodzin-CID1816-ID16aFoq.html', 
         totalPrice: 5600, 
         availability: 'Wymaga Potwierdzenia', 
         status: 'Brak jednoznacznej ceny i dostępności dla grupy 8-osobowej. Informacje w konwersacji są niejasne i sprzeczne.', 
         capacity: 8, 
         amenities: ['Widok na góry', 'Blisko term i szlaków', 'Basen', 'Jacuzzi'], 
         location: 'W górach', 
         distance: 5.5, 
         notes: 'Informacje o cenie i dostępności w konwersacji są niejasne i sprzeczne.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Pokój 4 osobowy standard trzylatek. balkon. Widok z łazienki na Tatry. Zachodzony w cenie 90 zł/osoba/noc. dziecko, poniżej lat 10- ceny w cenie 63 zł/noc.pokój 4 osobowy standard z łazienką, balkonem i widokiem z balkonu na Tatry Zachodnie w cenie 90 zł/osoba/noc, dziecko poniżej lat 10-ciu w cenie 63 zł/noc' },
            { sender: 'owner', message: 'Góralski Sen dla 4 osób z aneksem kuchennym, łazienką, bujanym hamakiem, dwoma balkonami i  bezpośrednim widokiem na całą panoramę Tatr w cenie 115 zł/osoba/noc, dziecko poniżej lat 10-ciu w cenie 81 zł/noc' }
        ], latitude: 49.2750, longitude: 19.9400 }, 
        { id: 26, 
         title: 'Zakopane!!! Pokoje, noclegi w Centrum!!! Boże Ciało, WAKACJE 2025', 
         link: 'https://www.olx.pl/d/oferta/zakopane-pokoje-noclegi-w-centrum-boze-cialo-wakacje-2025-CID1816-ID1foBh.html', 
         totalPrice: null, 
         availability: 'Wymaga Potwierdzenia', 
         status: 'Brak potwierdzenia ceny i dostępności. Proszono o kontakt telefoniczny.', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego', 
         distance: 0.7, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Zapraszam do kontaktu telefonicznego (603444718) Moja mama zajmuje się pensjonatem a ja tylko odpowiadam na wiadomości' }
        ], latitude: 49.2990, longitude: 19.9570 }, 
        { id: 27, 
         title: 'Dom na wyłączność jacuzzi ,święta', 
         link: 'https://www.olx.pl/d/oferta/dom-na-wylacznosc-jacuzzi-swieta-CID1816-ID12cf5V.html', 
         totalPrice: 3920, 
         availability: 'Dostępny', 
         status: 'Dostępność od 27 lipca Dom, pokoje od 26', 
         capacity: null, 
         amenities: ['Jacuzzi'], 
         location: 'Zakopane', 
         distance: 2.9, 
         notes: 'Brak ceny dla terminu. Możliwe wynajęcie pokoi od 26 lipca.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? Goście: dorośli (7), dzieci (1) niemowlęta (0).' },
            { sender: 'owner', message: 'Domek wolny od 27 lipca ewentualnie pokoje od 26 lipca są dostępne.' },
            { sender: 'user', message: 'Jaka by była cena za pokoje 102 dwa dwuosobowe i jeden czteroosobowy. Jaka byłaby cena za dom na wyłączność? (27-02.08)' },
            { sender: 'owner', message: 'Cena za domek 1200zl  Domek Gabi zdjecia na stronie' },
            { sender: 'owner', message: 'Cena za pokój 70 zł nocleg od osoby' }
        ], latitude: 49.2900, longitude: 19.9500 }, 
        { id: 28, 
         title: 'Domki pod lasem WYNAJEM Domek', 
         link: 'https://www.olx.pl/d/oferta/domki-pod-lasem-wynajem-domek-CID1816-IDwnlvP.html', 
         totalPrice: 3500, 
         availability: 'Dostępny', 
         status: 'Dostępny, 500zl doba', 
         capacity: 8, 
         amenities: [], 
         location: 'Pod lasem', 
         distance: 4.8, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)? Goście: dorośli (7), dzieci (1) niemowlęta (0)' },
            { sender: 'owner', message: 'Witam mam wolne zapraszam' },
            { sender: 'user', message: 'W jakiej cenie?' },
            { sender: 'owner', message: '500 za dobę' }
        ], latitude: 49.2800, longitude: 19.9800 }, 
        { id: 29, 
         title: 'Domek w centrum Zakopanego, ul Tetmajera, Tatry', 
         link: 'https://www.olx.pl/d/oferta/domek-w-centrum-zakopanego-ul-tetmajera-tatry-CID1816-IDGdv-s9.html', 
         totalPrice: null, 
         availability: 'Dostępny', 
         status: 'Brak potwierdzenia ceny w konwersacji. Wymaga dalszego kontaktu.', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Mamy jeszcze wolny termin' },
            { sender: 'user', message: 'W jakiej cenie?' }
        ], latitude: 49.3000, longitude: 19.9650 }, 
        { id: 30, 
         title: 'Wynajem pokoi i apartamentów Zakopane ul.Króle 1a', 
         link: 'https://www.olx.pl/d/oferta/wynajem-pokoi-i-apartamentow-zakopane-ul-krole-1a-CID1816-ID16ahB4.html', 
         totalPrice: 3920, 
         availability: 'Dostępny', 
         status: 'Dostępny, 80zł os/doba', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Witam' },
            { sender: 'owner', message: 'A ilość pokoi jaka państwa interesuje?' },
            { sender: 'user', message: 'Np. 2 dwuosobowe i 1 czteroosobowy ale jesteśmy elastyczni pod tym względem jeśli takie nie są dotępne' },
            { sender: 'owner', message: 'No tak mamy dwa dwuosobowe i jedna czwórkę' },
            { sender: 'user', message: 'jaka byłaby cena?' },
            { sender: 'owner', message: '80 zł doba od osoby' }
        ], latitude: 49.3000, longitude: 19.9650 }, 
        { id: 31, 
         title: 'Domek Góralski z widokiem na góry blisko Term Białka Bukowina ognisko', 
         link: 'https://www.olx.pl/d/oferta/domek-goralski-z-widokiem-na-gory-blisko-term-bialka-bukowina-ognisko-CID1816-ID169qH4.html?isPreviewActive=0&sliderIndex=4', 
         totalPrice: 4200, 
         availability: 'Częściowo', 
         status: 'dostepny od 29 lipca', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Witam domek mam dostępny do 29 lipca cena za dobre 600 zł' }
        ], latitude: 49.3000, longitude: 19.9650 }, 
        { id: 32, 
         title: 'Zakopane, apartamenty, pokoje gościnne, centrum, blisko do szlaków.', 
         link: 'https://www.olx.pl/d/oferta/zakopane-apartamenty-pokoje-goscinne-centrum-blisko-do-szlakow-CID1816-IDPbuNi.html', 
         totalPrice: 3920, 
         availability: 'Dostępny', 
         status: 'Dostępny', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Witam. Mamy wolne pokoje w tym terminie w cenie 80 zł/osoba za dobę.  Dla gości zmotoryzowanych mamy parking przy budynku w tej cenie.  W sprawie wszelkich innych zapytań oraz rezerwacji proszę dzwonić bezpośrednio do gospodyni pod nr. (ukryte informacje)  Pozdrawiam Leszek Medrzycki' }
        ], latitude: 49.3000, longitude: 19.9650 }, 
        { id: 33, 
         title: 'Nocleg Komfortowe Pokoje GÓRY, Dom do wynajęcia', 
         link: 'https://www.olx.pl/d/oferta/nocleg-komfortowe-pokoje-gory-dom-do-wynajecia-CID1816-IDliY30.html', 
         totalPrice: null, 
         availability: 'Dostępny', 
         status: 'Dostępny', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Tak proszę o kontakt  telefoniczny (ukryte informacje)' }
        ], latitude: 49.3000, longitude: 19.9650 }, 
        { id: 34, 
         title: 'Willa Wojcias Zapraszamy!!!', 
         link: 'https://www.olx.pl/d/oferta/willa-wojcias-zapraszamy-CID1816-IDKMIsT.html?chat=1&isPreviewActive=0', 
         totalPrice: 3640, 
         availability: 'Dostępny', 
         status: 'Dostępny', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Witam a ilu osobowe potrzebujecie pokoje' },
            { sender: 'user', message: 'Najlepiej 2 dwuosobowe i 1 czteroosobowy jesli jest taka mozliwosc ale jestesmy elastyczni w tej kwestii' },
            { sender: 'owner', message: 'Bylyby dostępne takie pokoje zapraszam rezerwacja pod numerem 505 847 214' },
            { sender: 'user', message: 'jaka byłaby cena za te pokoje?' },
            { sender: 'owner', message: 'Nocleg 65 zl od osoby' }
        ], latitude: 49.3000, longitude: 19.9650 }, 
        { id: 35, 
         title: 'Pokoje Apartament u Bartka', 
         link: 'https://www.olx.pl/d/oferta/pokoje-apartament-u-bartka-CID1816-IDwwzz1.html?chat=1&isPreviewActive=0', 
         totalPrice: 2800, 
         availability: '2800 za pokoje dla wszystkich, 3300 za apartament', 
         status: 'Dostępny', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Witam a ilu osobowe potrzebujecie pokoje' },
            { sender: 'user', message: 'Najlepiej apartament  lub 2 pokoje dwuosobowe i 1 czteroosobowy' },
            { sender: 'owner', message: 'Apartament 3300zl' },
            { sender: 'owner', message: 'Pokoje 2800 zł za cały pobyt od wszystkich' }
        ], latitude: 49.3000, longitude: 19.9650 }, 
        { id: 36, 
         title: 'Pokoje Gościnne Nocleg w Górach Zakopane Poronin Tanio Kwatery Wakacje', 
         link: 'https://www.olx.pl/d/oferta/pokoje-goscinne-nocleg-w-gorach-zakopane-poronin-tanio-kwatery-wakacje-CID1816-IDmTCd8.html', 
         totalPrice: 2800, 
         availability: '2800 za pokoje', 
         status: 'Dostępny', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest możliwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosłych i jednego dziecka' },
            { sender: 'owner', message: 'Witam Miałbym wolny pokój trzyosobowy i czteroosobowy obok siebie na tym samym piętrze gdzie byli by państwo sami w cenie 50 złotych od osoby za noc' }
        ], latitude: 49.3000, longitude: 19.9650 }              
    ];

    const offersGrid = document.getElementById('offers-grid');
    const availabilityFilter = document.getElementById('availability-filter');
    const sortBy = document.getElementById('sort-by');

    let activeFilters = [];

    // Modal elements for chat
    const chatModal = document.getElementById('chatModal');
    const chatModalTitle = document.getElementById('chatModalTitle');
    const chatMessagesContainer = document.getElementById('chatMessages');
    const modalClose = document.getElementsByClassName('modal-close')[0];

    const getStatusColor = (availability) => {
        switch (availability) {
            case 'Dostępny': return 'text-green-600 bg-green-100';
            case 'Częściowo': return 'text-yellow-600 bg-yellow-100';
            case 'Wymaga Potwierdzenia': return 'text-blue-600 bg-blue-100';
            case 'Brak Danych': return 'text-red-600 bg-red-100';
            default: return 'text-gray-600 bg-gray-100';
        }
    };

    const renderOffers = () => {
        let filteredData = [...accommodationData];

        if (activeFilters.length > 0) {
            filteredData = filteredData.filter(offer => activeFilters.includes(offer.availability));
        }

        const sortValue = sortBy.value;
        filteredData.sort((a, b) => {
            switch (sortValue) {
                case 'price_asc':
                    return (a.totalPrice || Infinity) - (b.totalPrice || Infinity);
                case 'price_desc':
                    return (b.totalPrice || -Infinity) - (a.totalPrice || -Infinity);
                case 'dist_asc':
                    return (a.distance || Infinity) - (b.distance || Infinity);
                case 'dist_desc':
                    return (b.distance || -Infinity) - (a.distance || -Infinity);
                default:
                    return 0;
            }
        });
        
        offersGrid.innerHTML = '';
        if (filteredData.length === 0) {
             offersGrid.innerHTML = `<p class="text-center col-span-full text-gray-500">Brak ofert spełniających wybrane kryteria.</p>`;
             return;
        }
        
        filteredData.forEach(offer => {
            const card = document.createElement('div');
            card.className = 'card bg-white rounded-2xl shadow-md overflow-hidden flex flex-col';
            card.innerHTML = `
                <div class="p-6 flex-grow">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-xs font-semibold py-1 px-3 rounded-full ${getStatusColor(offer.availability)}">${offer.availability}</span>
                        <p class="text-2xl font-bold text-[#2F5233]">${offer.totalPrice ? `${offer.totalPrice} zł` : 'Cena ?'}</p>
                    </div>
                    <h4 class="text-lg font-bold mb-2 h-14">${offer.title}</h4>
                    <div class="text-sm text-gray-500 mb-4 space-y-1">
                        <p>📍 Lokalizacja: <span class="font-medium text-gray-700">${offer.location || 'Nieznana'}</span></p>
                        <p>🚗 Do Krupówek: <span class="font-medium text-gray-700">${offer.distance !== null ? `~${offer.distance} km` : 'Nieznana'}</span></p>
                        <p>👥 Pojemność: <span class="font-medium text-gray-700">${offer.capacity ? `${offer.capacity} osób` : 'Nieznana'}</span></p>
                    </div>
                     <div class="text-sm text-gray-600 mb-4">
                        <p><span class="font-semibold">Status:</span> ${offer.status}</p>
                        ${offer.notes ? `<p class="mt-1"><span class="font-semibold">Notatki:</span> ${offer.notes}</p>` : ''}
                    </div>
                </div>
                <div class="p-6 bg-gray-50 border-t border-gray-200">
                    <button class="w-full text-center block bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors open-chat-modal-btn" data-offer-id="${offer.id}">
                        Pokaż Konwersację
                    </button>
                </div>
                <div class="p-6 bg-gray-50 border-t border-gray-200">
                    <a href="${offer.link}" target="_blank" rel="noopener noreferrer" class="w-full text-center block bg-[#4A7856] text-white font-bold py-2 px-4 rounded-lg hover:bg-[#2F5233] transition-colors">
                        Zobacz Ofertę na OLX
                    </a>
                </div>
            `;
            offersGrid.appendChild(card);
        });

        // Add event listeners for chat modal buttons
        document.querySelectorAll('.open-chat-modal-btn').forEach(button => {
            button.addEventListener('click', function() {
                const offerId = parseInt(this.dataset.offerId);
                const offer = accommodationData.find(o => o.id === offerId);
                if (offer && offer.chatContent) {
                    chatModalTitle.textContent = `Konwersacja dla: ${offer.title}`;
                    chatMessagesContainer.innerHTML = ''; // Clear previous messages
                    offer.chatContent.forEach(chatMsg => {
                        const msgDiv = document.createElement('div');
                        msgDiv.className = `chat-message ${chatMsg.sender === 'user' ? 'chat-user' : 'chat-owner'}`;
                        msgDiv.textContent = chatMsg.message;
                        chatMessagesContainer.appendChild(msgDiv);
                    });
                    chatModal.style.display = 'flex'; // Show modal
                }
            });
        });
    };

    // Close the modal when clicking on the close button or outside the content
    modalClose.addEventListener('click', () => {
        chatModal.style.display = 'none';
    });
    chatModal.addEventListener('click', (e) => {
        if (e.target === chatModal) {
            chatModal.style.display = 'none';
        }
    });

    availabilityFilter.addEventListener('click', (e) => {
        if (e.target.tagName === 'BUTTON') {
            const filter = e.target.dataset.filter;
            e.target.classList.toggle('active');
            if (activeFilters.includes(filter)) {
                activeFilters = activeFilters.filter(f => f !== filter);
            } else {
                activeFilters.push(filter);
            }
            renderOffers();
        }
    });

    sortBy.addEventListener('change', renderOffers);

    const renderCharts = () => {
        // Clear previous charts if they exist
        const priceChartCanvas = document.getElementById('priceChart');
        const distanceChartCanvas = document.getElementById('distanceChart');
        if (priceChartCanvas.chart) {
            priceChartCanvas.chart.destroy();
        }
        if (distanceChartCanvas.chart) {
            distanceChartCanvas.chart.destroy();
        }

        const confirmedPriceData = accommodationData.filter(d => d.totalPrice && d.availability === 'Dostępny');
        const knownDistanceData = accommodationData.filter(d => d.distance !== null && !isNaN(d.distance));
        
        priceChartCanvas.chart = new Chart(priceChartCanvas, {
            type: 'bar',
            data: {
                labels: confirmedPriceData.map(d => d.title.substring(0,25) + (d.title.length > 25 ? '...' : '')),
                datasets: [{
                    label: 'Cena całkowita (zł)',
                    data: confirmedPriceData.map(d => d.totalPrice),
                    backgroundColor: '#4A7856',
                    borderColor: '#2F5233',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: {
                    x: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });

        distanceChartCanvas.chart = new Chart(distanceChartCanvas, {
            type: 'bar',
            data: {
                labels: knownDistanceData.map(d => d.title.substring(0,25) + (d.title.length > 25 ? '...' : '')),
                datasets: [{
                    label: 'Odległość od Krupówek (km)',
                    data: knownDistanceData.map(d => d.distance),
                    backgroundColor: '#A2B8A6',
                    borderColor: '#6E8B74',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: {
                    x: {
                        beginAtZero: true
                    }
                },
                 plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    };

    // Initialize the map after the DOM is loaded
    const initMap = () => {
        const map = L.map('map').setView([49.2991, 19.9575], 12); // Centered on Krupówki, Zakopane

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Add markers for each accommodation with known coordinates
        accommodationData.forEach(offer => {
            if (offer.latitude && offer.longitude) {
                L.marker([offer.latitude, offer.longitude])
                    .addTo(map)
                    .bindPopup(`<b>${offer.title}</b><br>${offer.location || 'Zakopane'}<br>${offer.distance !== null ? `~${offer.distance} km od Krupówek` : 'Odległość nieznana'}`);
            }
        });
         // Add a marker for Krupówki itself
        L.marker([49.2991, 19.9575], {
            icon: L.divIcon({
                className: 'my-custom-icon',
                html: '<div class="bg-red-600 text-white rounded-full p-1 text-xs font-bold text-center" style="min-width: 50px;">Krupówki</div>',
                iconSize: [60, 20], // size of the icon
                iconAnchor: [30, 10] // point of the icon which will correspond to marker's location
            })
        }).addTo(map)
        .bindPopup('<b>Krupówki</b><br>Centrum Zakopanego');
    };


    renderOffers();
    renderCharts();
    initMap(); // Call initMap to render the map
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });
});
</script>

</body>
</html>
