<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interaktywne PorÃ³wnanie Ofert Noclegowych - Zakopane</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Leaflet CSS for map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha2d1-ZSpT5+PlfR/uOaD3X9bKkYJ7Qf/3NqE5B2U5fP5p6Nf+KxLz/uU6Z3/oXw2+Z2u+" crossorigin=""/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals & Deep Forest Green -->
    <!-- Application Structure Plan: A single-page dashboard designed for decision-making. The structure prioritizes user interaction over mirroring the source report's linear flow. It consists of: 1. A global navigation bar for quick scrolling. 2. A powerful control panel with sorting and filtering options (by price, distance, amenities, availability), which is the primary interaction hub. 3. An interactive grid of "offer cards" that dynamically updates based on user selections, presenting key information concisely. 4. A visualization section with bar charts for at-a-glance comparison of price and location trade-offs. 5. A map visualization section showing accommodation locations. 6. A final summary and recommendations section to guide the user's choice. This task-oriented design empowers the user to explore the data according to their personal priorities (e.g., "show me the cheapest available options with a jacuzzi"), making the complex data from the report easily digestible and comparable. -->
    <!-- Visualization & Content Choices: The core of the application is the transformation of static report entries into interactive elements. Report Info: Each accommodation offer. Goal: Compare options based on multiple criteria. Viz/Presentation Method: An interactive card grid (HTML/Tailwind/JS) including a "PokaÅ¼ KonwersacjÄ™" button that opens a modal displaying the chat transcript. Interaction: Users can filter and sort the cards. Clicking the button opens a fullscreen modal for reading chat content. Justification: Cards are more flexible and mobile-friendly than a static table, allowing for a clearer presentation of varied information. Chat transcripts provide direct context for data. Report Info: Price and Distance data. Goal: Provide a high-level visual summary of key trade-offs. Viz/Presentation Method: Two separate bar charts (Chart.js/Canvas). Interaction: Tooltips on hover provide exact values. Justification: Bar charts are ideal for comparing discrete values across different categories, making the cost-vs-location dilemma immediately apparent. Report Info: Geographic locations of accommodations. Goal: Provide visual context of proximity to KrupÃ³wki and other points. Viz/Presentation Method: Interactive Map (Leaflet.js/Canvas-based tiles). Interaction: Users can pan, zoom, and click markers for info. Justification: A map is essential for understanding spatial relationships and travel implications, directly addressing the user's need for location comparison. All interactions are handled by vanilla JavaScript, ensuring a lightweight and fast experience. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8; /* Warm off-white */
            color: #383838;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 450px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .nav-link {
            transition: color 0.3s;
        }
        .nav-link:hover {
            color: #2F5233; /* Dark Green */
        }
        .filter-btn, .sort-select {
            transition: all 0.3s;
        }
        .filter-btn.active {
            background-color: #4A7856; /* Green */
            color: #ffffff;
            border-color: #4A7856;
        }
        .card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Modal styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.8); /* Black w/ opacity */
            align-items: center;
            justify-content: center;
        }
        .modal-content-chat {
            background-color: #ffffff;
            margin: auto;
            padding: 2rem;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); /* shadow-2xl */
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .modal-close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
        }
        .modal-close:hover,
        .modal-close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }
        .chat-message {
            padding: 0.75rem;
            border-radius: 0.5rem;
            max-width: 80%;
            word-wrap: break-word;
        }
        .chat-user {
            background-color: #e0f2f1; /* Light green */
            align-self: flex-end;
            margin-left: auto;
        }
        .chat-owner {
            background-color: #f0f0f0; /* Light gray */
            align-self: flex-start;
            margin-right: auto;
        }
        /* Map container specific styles */
        #map {
            height: 500px; /* Default height */
            width: 100%;
        }
        @media (min-width: 768px) {
            #map {
                height: 600px; /* Taller on larger screens */
            }
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold text-[#2F5233]">Noclegi Zakopane 2025</h1>
            <div class="hidden md:flex space-x-6 text-gray-600 font-medium">
                <a href="#porownanie" class="nav-link">PorÃ³wnanie</a>
                <a href="#wizualizacje" class="nav-link">Wykresy</a>
                <a href="#mapa" class="nav-link">Mapa</a>
                <a href="#podsumowanie" class="nav-link">Podsumowanie</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-8 md:py-12">
        <section id="intro" class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold mb-4">ZnajdÅº Idealny Nocleg na Wakacje</h2>
            <p class="max-w-3xl mx-auto text-gray-600">
                Ta interaktywna strona pomoÅ¼e Ci porÃ³wnaÄ‡ zweryfikowane oferty noclegowe w Zakopanem i okolicach na termin 26.07 - 02.08.2025 dla 8 osÃ³b. UÅ¼yj filtrÃ³w i sortowania, aby znaleÅºÄ‡ opcjÄ™ najlepiej dopasowanÄ… do Twoich potrzeb. Dane pochodzÄ… z analizy ofert i rozmÃ³w z wÅ‚aÅ›cicielami.
            </p>
        </section>

        <section id="porownanie" class="scroll-mt-24">
            <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8 mb-10">
                <h3 class="text-2xl font-bold mb-6">Filtruj i Sortuj Oferty</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="md:col-span-2">
                        <label class="block text-sm font-semibold mb-2 text-gray-700">Filtruj wg dostÄ™pnoÅ›ci:</label>
                        <div id="availability-filter" class="flex flex-wrap gap-2">
                            <button data-filter="DostÄ™pny" class="filter-btn text-sm font-medium py-2 px-4 rounded-full border border-gray-300 bg-white">âœ… W peÅ‚ni dostÄ™pne</button>
                            <button data-filter="CzÄ™Å›ciowo" class="filter-btn text-sm font-medium py-2 px-4 rounded-full border border-gray-300 bg-white">âš ï¸ CzÄ™Å›ciowo dostÄ™pne</button>
                            <button data-filter="Wymaga Potwierdzenia" class="filter-btn text-sm font-medium py-2 px-4 rounded-full border border-gray-300 bg-white">â“ Wymaga potwierdzenia</button>
                            <button data-filter="Brak Danych" class="filter-btn text-sm font-medium py-2 px-4 rounded-full border border-gray-300 bg-white">â›” Brak Danych</button>
                        </div>
                    </div>
                    <div>
                        <label for="sort-by" class="block text-sm font-semibold mb-2 text-gray-700">Sortuj wedÅ‚ug:</label>
                        <select id="sort-by" class="sort-select w-full p-2.5 border border-gray-300 rounded-lg bg-gray-50 focus:ring-2 focus:ring-[#4A7856] focus:border-[#4A7856] outline-none">
                            <option value="price_asc">Cena: od najniÅ¼szej</option>
                            <option value="price_desc">Cena: od najwyÅ¼szej</option>
                            <option value="dist_asc">OdlegÅ‚oÅ›Ä‡: od najbliÅ¼szej</option>
                            <option value="dist_desc">OdlegÅ‚oÅ›Ä‡: od najdalszej</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="offers-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
            </div>
        </section>

        <section id="wizualizacje" class="mt-16 scroll-mt-24">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12">Wizualne PorÃ³wnanie Ofert</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                    <h3 class="text-xl font-bold text-center mb-4">PorÃ³wnanie Ceny CaÅ‚kowitej (7 nocy)</h3>
                    <p class="text-center text-sm text-gray-500 mb-6">Dotyczy ofert z potwierdzonÄ… cenÄ….</p>
                    <div class="chart-container">
                        <canvas id="priceChart"></canvas>
                    </div>
                </div>
                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                    <h3 class="text-xl font-bold text-center mb-4">Szacowana OdlegÅ‚oÅ›Ä‡ od KrupÃ³wek</h3>
                     <p class="text-center text-sm text-gray-500 mb-6">Dotyczy ofert ze znanÄ… lokalizacjÄ….</p>
                    <div class="chart-container">
                        <canvas id="distanceChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="mapa" class="mt-16 scroll-mt-24">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12">Mapa Ofert Noclegowych</h2>
            <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">
                PoniÅ¼ej znajduje siÄ™ interaktywna mapa z zaznaczonymi przybliÅ¼onymi lokalizacjami noclegÃ³w. Centrum mapy to KrupÃ³wki w Zakopanem. Kliknij na markery, aby zobaczyÄ‡ nazwÄ™ obiektu.
            </p>
            <div id="map" class="h-[500px] w-full rounded-2xl shadow-lg"></div>
        </section>

        <section id="podsumowanie" class="mt-16 scroll-mt-24">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12">Podsumowanie i Rekomendacje</h2>
            <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                 <div class="space-y-8">
                    <div>
                        <h3 class="text-xl font-bold mb-3 text-[#2F5233]">Kluczowe Wnioski</h3>
                        <p class="text-gray-600">Analiza ofert pokazuje, Å¼e kluczowe jest bezpoÅ›rednie potwierdzanie ceny i dostÄ™pnoÅ›ci, poniewaÅ¼ informacje w ogÅ‚oszeniach czÄ™sto sÄ… nieaktualne. WybÃ³r sprowadza siÄ™ do kompromisu miÄ™dzy cenÄ…, lokalizacjÄ… (i kosztami dojazdÃ³w) a dostÄ™pnymi udogodnieniami, ktÃ³re mogÄ… znaczÄ…co podnieÅ›Ä‡ komfort pobytu.</p>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold mb-3 text-[#2F5233]">Najbardziej ObiecujÄ…ce Oferty</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                           <li><span class="font-semibold">Domek z jacuzzi blisko Term ChochoÅ‚owskich:</span> Najlepszy stosunek ceny do udogodnieÅ„ (jacuzzi, klimatyzacja). Idealny dla grupy ceniÄ…cej relaks, nawet kosztem dojazdÃ³w do centrum Zakopanego.</li>
                           <li><span class="font-semibold">Domek 12-osobowy:</span> Oferuje najwiÄ™cej przestrzeni i komfortu dla 8-osobowej grupy w dobrej cenie, co moÅ¼e byÄ‡ duÅ¼Ä… zaletÄ… podczas dÅ‚uÅ¼szego pobytu.</li>
                           <li><span class="font-semibold">Domek 8-osobowy w ChochoÅ‚owie:</span> Solidna opcja z w peÅ‚ni potwierdzonÄ… dostÄ™pnoÅ›ciÄ… i cenÄ…, dobra jako punkt wyjÅ›cia do negocjacji lub pewny wybÃ³r, jeÅ›li inne opcje zawiodÄ….</li>
                           <li><span class="font-semibold">Apartamenty Jaworowe Izby z baliÄ…:</span> Potwierdzona cena i atrakcyjne udogodnienia, choÄ‡ wymaga rozwiÄ…zania kwestii 26 lipca.</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold mb-3 text-[#2F5233]">Praktyczne Porady</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                           <li><strong>Zawsze potwierdzaj cenÄ™ caÅ‚kowitÄ…:</strong> Dopytaj o wszystkie dodatkowe opÅ‚aty (klimatyczna, za media, sprzÄ…tanie).</li>
                           <li><strong>Weryfikuj dokÅ‚adnÄ… lokalizacjÄ™:</strong> UÅ¼yj mapy, aby oceniÄ‡ realny czas i koszt dojazdÃ³w do KrupÃ³wek i innych atrakcji.</li>
                           <li><strong>OkreÅ›l priorytety grupy:</strong> Zdecydujcie, co jest waÅ¼niejsze â€“ bliskoÅ›Ä‡ centrum, cisza i widoki, czy dostÄ™p do basenu/jacuzzi.</li>
                        </ul>
                    </div>
                 </div>
            </div>
        </section>

    </main>

    <!-- The Modal for chat conversation -->
    <div id="chatModal" class="modal fixed inset-0 flex items-center justify-center p-4" style="display: none;">
        <span class="modal-close">&times;</span>
        <div class="modal-content-chat">
            <h3 class="text-xl font-bold text-center mb-4 text-[#2F5233]" id="chatModalTitle"></h3>
            <div id="chatMessages" class="flex flex-col gap-3">
                <!-- Chat messages will be dynamically inserted here -->
            </div>
        </div>
    </div>

<!-- Leaflet JavaScript -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha2d1-oXq/5+Fz/3NqE5B2U5fP5p6Nf+KxLz/uU6Z3/oXw2+Z2u+" crossorigin=""></script>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const accommodationData = [
        { id: 1, 
         title: 'Domek 8-osobowy CHOCHOÅÃ“W', 
         link: 'https://www.olx.pl/d/oferta/domek-zakopane-8osobowy-wynajem-chochol-CID1816-IDY2Pra.html', 
         totalPrice: 5600, 
         availability: 'DostÄ™pny', 
         status: 'PeÅ‚na dostÄ™pnoÅ›Ä‡ i cena potwierdzona.', 
         capacity: 8, amenities: [], 
         location: 'ChochoÅ‚Ã³w', 
         distance: 20.5, 
         notes: 'DostÄ™pny w terminie 25.07-02.08.2025 dla 7 dorosÅ‚ych i 1 dziecka.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Tak jest dostepny' },
            { sender: 'user', message: 'W jakiej cenie?' },
            { sender: 'owner', message: 'Cena w okresie wakacji 800zÅ‚ doba w sumie 5600zÅ‚ za 7 nocy' }
        ], latitude: 49.355418, longitude: 19.819255 },
        { id: 2, 
         title: 'Apartamenty Zakopane Wakacje SierpieÅ„ Weekendy', 
         link: 'https://www.olx.pl/d/oferta/apartamenty-zakopane-wakacje-sierpien-weekendy-CID1816-ID16307m.html', 
         totalPrice: 3920, 
         availability: 'DostÄ™pny', 
         status: 'Cena i dostÄ™pnoÅ›Ä‡ potwierdzona.', 
         capacity: 8, 
         amenities: ['PiÄ™kne widoki', 'Panorama Tatr'], 
         location: 'Murzasichle', 
         distance: 11.4, 
         notes: 'Cena 70 zÅ‚ od osoby za dobÄ™. W drugim budynku.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025-02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Witam mamy w drugim budynku bardzo piÄ™kne widoki caÅ‚a panorama Tatr w Murzasichle strona www.utrebuni.pl' },
            { sender: 'user', message: 'W jakiej cenie?' },
            { sender: 'owner', message: 'Tak wynajem jest moÅ¼liwy 70 zÅ‚ od osoby wiÄ™cej informacji pod numerem tel 728 739 080 pozdrawiam' }
        ], latitude: 49.303838, longitude: 20.036490 },
        { id: 3, 
         title: 'WAKACJE! BASEN, JACUZZI, sauna i parking - w cenie!', 
         link: 'https://www.olx.pl/d/oferta/wakacje-basen-jacuzzi-sauna-i-parking-w-cenie-CID1816-IDvrPqn.html', 
         totalPrice: 3850, 
         availability: 'CzÄ™Å›ciowo', 
         status: 'Cena potwierdzona, termin nie pokrywa siÄ™ w peÅ‚ni.', 
         capacity: 8, amenities: ['Basen', 'SiÅ‚ownia', 'Jacuzzi', 'Plac zabaw', 'Sauna', 'Grota solna', 'Parking'], 
         location: 'Zakopane', 
         distance: 2.0, 
         notes: 'DostÄ™pne tylko 27.07-01.08.2025. Cena 550 zÅ‚ za dobÄ™.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? GoÅ›cie: doroÅ›li (7) dzieci (1), niemowlÄ™ta (0).' },
            { sender: 'owner', message: 'Witam mam wolny apartamenty. Dziecko ile lat?' },
            { sender: 'user', message: 'Dziecko 10 lat' },
            { sender: 'owner', message: 'MogÄ™ zaproponowaÄ‡ apartament 1. Cena 8os-550 zÅ‚ doba Apartament ma 7 miejsc do spania, dodatkowo moÅ¼emy dostawiÄ‡ materac.' },
            { sender: 'owner', message: 'Apartament 1 (niski parter/przyziemie) - w cenie parking, basen, siÅ‚ownia, jacuzzi, plac zabaw.' },
            { sender: 'owner', message: 'Ewentualnie 2 apartamenty w tym samym budynku (byÅ‚yby to apartamenty 2 i 3)ale w terminie 27.07-01.08' },
            { sender: 'owner', message: 'Lub inna opcja Apartamenty 1 i 2- oddalone od siebie 10min spacerem, w terminie teÅ¼ 27.07-01.08' },
            { sender: 'owner', message: 'Apartament 1 (niski parter/przyziemie) - w cenie parking, basen, siÅ‚ownia, jacuzzi, plac zabaw.  Apartament 2 (z tarasem) - z moÅ¼liwoÅ›ciÄ… korzystania z sauny i groty solnej na wyÅ‚Ä…cznoÅ›Ä‡. Apartament 3 (z balkonem) - w cenie parking, altanka, plac zabaw.' }
        ], latitude: 49.279274, longitude: 19.908976 }, 
        { id: 4, 
         title: 'Apartamenty Jaworowe Izby z baliÄ… z hydromasaÅ¼em', 
         link: 'https://www.olx.pl/d/oferta/apartamenty-jaworowe-izby-z-balia-z-hydromasazem-CID1816-ID15UskW.html', 
         totalPrice: 3100, 
         availability: 'CzÄ™Å›ciowo', 
         status: 'Cena potwierdzona, 26.07 zarezerwowany.', 
         capacity: 8, 
         amenities: ['Balia z hydromasaÅ¼em', 'Grill', 'Plac zabaw', 'Hamak', 'HuÅ›tawki', 'Trampolina', 'Bramki do piÅ‚ki noÅ¼nej', 'PlayStation', 'WiFi', 'Parking'], 
         location: 'Zakopane', 
         distance: 2.5, 
         notes: 'DostÄ™pny od 27.07 do 02.08.2025. CaÅ‚kowita cena 3100 zÅ‚.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? GoÅ›cie: doroÅ›li (7), dzieci (1), niemowlÄ™ta (0)' },
            { sender: 'owner', message: 'DzieÅ„ dobry, 26 lipca jest zarezerwowany, ale od 27 lipca do 2 sierpnia jak najbardziej zapraszamy :)' },
            { sender: 'user', message: 'w jakiej cenie?' },
            { sender: 'owner', message: 'A w jakim wieku jest dziecko?' },
            { sender: 'user', message: '10 lat' },
            { sender: 'owner', message: 'To bÄ™dzie 3100 zÅ‚, w cenie macie dwie sypialnie, dwie Å‚azienki oraz oddzielna czÄ™Å›Ä‡ jadalniana z aneksem kuchennym, w cenie rÃ³wnieÅ¼ caÅ‚y tydzieÅ„ balia z hydromasaÅ¼em, grill, plac zabaw (hamak, huÅ›tawki, trampolina, bramki do piÅ‚ki noÅ¼nej), PlayStation, WiFi, parking :)' },
            { sender: 'user', message: 'W razie pytaÅ„ proszÄ™ o kontakt 506014406 :)' }
         ], latitude: 49.2950, longitude: 19.9500 }, 
        { id: 5, 
         title: 'BOÅ»E CIAÅO!! Wakacje!! Ostatnie wolne pokoje!!', 
         link: 'https://www.olx.pl/d/oferta/boze-cialo-wakacje-ostatnie-wolne-pokoje-CID1816-IDKmdfh.html', 
         totalPrice: null, 
         availability: 'Wymaga Potwierdzenia', 
         status: 'Wymaga dalszego kontaktu w celu potwierdzenia dostÄ™pnoÅ›ci i ceny.', 
         capacity: 8, 
         amenities: [], 
         location: 'Zakopane', 
         distance: 1.0, 
         notes: 'Brak potwierdzenia ceny i dostÄ™pnoÅ›ci w konwersacji.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Witam, proszÄ™ o informacjÄ™ ile lat ma dziecko i ile pokoi PaÅ„stwo potrzebujÄ… (ilu osobowe)' },
            { sender: 'owner', message: 'A najlepiej jakby Pan zadzwoniÅ‚ (660177174)' }
        ], latitude: 49.2991, longitude: 19.9575 }, 
        { id: 6, 
         title: 'Domek gÃ³ralski Wooden Tatra House', 
         link: 'https://www.olx.pl/d/oferta/domek-goralski-wooden-tatra-house-CID1816-ID16iUMx.html', 
         totalPrice: 6230, 
         availability: 'DostÄ™pny', 
         status: 'Cena caÅ‚kowita i dostÄ™pnoÅ›Ä‡ potwierdzona.', 
         capacity: 8, 
         amenities: [], 
         location: 'Zakopane', 
         distance: 3.0, 
         notes: 'DostÄ™pny 26.07-02.08.2025. CaÅ‚kowita cena 6230 zÅ‚.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? GoÅ›cie: doroÅ›li (7), dzieci (1), niemowlÄ™ta (0)' },
            { sender: 'owner', message: 'DzieÅ„ dobry tak jest dostÄ™pny domek w tym terminie , kwota to 6230 zÅ‚ pozdrawiam serdecznie' }
        ], latitude: 49.282518, longitude: 19.912964 }, 
        { id: 7, 
         title: 'Zakopane domek 12 osobowy wakacje Å›wiÄ™ta ferie', 
         link: 'https://www.olx.pl/d/oferta/zakopane-domek-12-osobowy-wakacje-swieta-ferie-CID1816-IDL9SkM.html?reason=seller_profile', 
         totalPrice: 5600, 
         availability: 'DostÄ™pny', 
         status: 'Cena i dostÄ™pnoÅ›Ä‡ potwierdzona.', 
         capacity: 12, 
         amenities: [], 
         location: 'Zakopane', 
         distance: 1.8, 
         notes: 'DostÄ™pny 26.07-02.08.2025. Cena 800 zÅ‚ za dobÄ™. Oferuje wiÄ™cej miejsca niÅ¼ wymagane.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'owner', message: 'Dla ilu osÃ³b potrzeba' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Termin wolny 800 zÅ‚ za dobÄ™' }
        ], latitude: 49.2970, longitude: 19.9650 }, 
        { id: 8, 
         title: 'Domek k/ Zakopane, widoki na gÃ³ry, jacuzzi prywatne', 
         link: 'https://www.olx.pl/d/oferta/domek-k-zakopane-widoki-na-gory-jacuzzi-prywatne-CID1816-IDFikla.html', 
         totalPrice: 5950, 
         availability: 'CzÄ™Å›ciowo', 
         status: 'Termin nie pokrywa siÄ™ w peÅ‚ni. Cena jacuzzi dodatkowo pÅ‚atna.', 
         capacity: 8, 
         amenities: ['Widoki na gÃ³ry', 'Prywatne jacuzzi (dodatkowo pÅ‚atne)'], 
         location: 'KoÅ‚o Zakopanego', 
         distance: 5.0, 
         notes: 'DostÄ™pny tylko 30.07-03.08.2025. Cena za dobÄ™ 850 zÅ‚ + opÅ‚ata za jacuzzi.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Witam serdecznie domek mamy wolny w terminie 30.07-03.08 Cena za dobÄ™ 850 zÅ‚, jeÅ¼eli chcieliby PaÅ„stwo dodatkowo skorzystaÄ‡ z jacuzzi wtedy jest dodatkowa opÅ‚ata 250 zÅ‚ za dwa kolejne dni kaÅ¼dy nastÄ™pny po sobie dzieÅ„ 50 zÅ‚ - jacuzzi jest prywatne i nagrzewane tylko na Å¼yczenie GoÅ›ci' }
        ], latitude: 49.2800, longitude: 19.9200 }, 
        { id: 9, 
         title: 'Domek z jacuzzi, balia na wyÅ‚Ä…cznoÅ›Ä‡ Termy ChochoÅ‚Ã³w domek Zakopane', 
         link: 'https://www.olx.pl/d/oferta/domek-z-jacuzzi-balia-na-wylacznosc-termy-chocholow-domek-zakopane-CID1816-ID15S2Bp.html', 
         totalPrice: 4200, 
         availability: 'DostÄ™pny', 
         status: 'PeÅ‚na dostÄ™pnoÅ›Ä‡ i cena potwierdzona.', 
         capacity: 8, 
         amenities: ['Jacuzzi', 'Balia na wyÅ‚Ä…cznoÅ›Ä‡', 'Klimatyzacja'], 
         location: 'blisko Term ChochoÅ‚Ã³w', 
         distance: 20.5, 
         notes: 'DostÄ™pny 26.07-02.08.2025. Cena 600 zÅ‚ za dobÄ™. 400m od Term ChochoÅ‚owskich.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? GoÅ›cie: doroÅ›li (7), dzieci (1), niemowlÄ™ta (0).' },
            { sender: 'owner', message: 'DzieÅ„ dobry dziÄ™kujÄ™ za zainteresowanie naszÄ… ofertÄ… mamy wolny domek z 3 sypialniami 600 zÅ‚ doba domek z klimatyzacja 400 m od term' }
        ], latitude: 49.3360, longitude: 19.8660 }, 
        { id: 10, 
         title: 'Domki Zakopane domek w gÃ³rach gÃ³ry apartamenty noclegi kwatery pokoje', 
         link: 'https://www.olx.pl/d/oferta/domki-zakopane-domek-w-gorach-gory-apartamenty-noclegi-kwatery-pokoje-CID1816-IDJ3aCB.html', 
         totalPrice: 3150, 
         availability: 'DostÄ™pny', 
         status: 'PeÅ‚na dostÄ™pnoÅ›Ä‡ i cena potwierdzona.', 
         capacity: 8, 
         amenities: ['Grill', 'Plac zabaw', 'Wi-Fi', 'TV', 'Kuchnia', 'Åazienka', 'Parking', 'Akceptacja zwierzÄ…t'], 
         location: 'GliczarÃ³w GÃ³rny, ul. Fiskowa Dolina 20', 
         distance: 11.4, 
         notes: 'Brak jednoznacznego potwierdzenia ceny i dostÄ™pnoÅ›ci w czacie.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? GoÅ›cie: doroÅ›li (7), dzieci (1), niemowlÄ™ta (0).' },
            { sender: 'owner', message: 'Witamy. Na razie jest  wolny DOMEK GÃ“RALSKI z Bali np. od juÅ¼ 24 lipca ale do 1 sierpnia.  CaÅ‚y domek na wyÅ‚Ä…cznoÅ›Ä‡ dla PaÅ„stwa. Cena 450 zÅ‚ za noc, za wszystkie osoby (a nie za osobÄ™), za caÅ‚y jeden Domek do 8 osÃ³b, (spaÅ‚o teÅ¼ wiÄ™cej osÃ³b). W pobliÅ¼u sÄ… TERMY - (baseny, gorÄ…ce ÅºrÃ³dÅ‚a, SPA), sklepy, karczmy, itd.  Obok jest WyciÄ…g - Stok Narciarki, restauracja i gÃ³rki do zjeÅ¼dÅ¼ania  dla dzieci. Domek w peÅ‚ni wyposaÅ¼ony: Wi-Fi, TV, na zewnÄ…trz grill, plac zabaw dla dzieci, kuchnia, Å‚azienka. Parking na dwa samochody do domku - gratis. Akceptujemy pieski. Rezerwacja 40% wpÅ‚aty.  Adres: GliczarÃ³w GÃ³rny ul. FiÅ›kowa Dolina 20, koÅ‚o Zakopanego przy Bukowinie TatrzaÅ„skiej.  W razie pytaÅ„ i rezerwacji proszÄ™ o kontakt tel. 790,_303,_500.Po wiÄ™cej zdjÄ™Ä‡ i informacji zapraszamy na stronÄ™: www.Wgorachdomki.pl  Pozdrawiamy "Domki w GÃ³rach pod WyciÄ…giem"' }
        ], latitude: 49.3490, longitude: 20.0800 }, 
        { id: 11, 
         title: 'Pokoje noclegi Zakopane, apartamenty', 
         link: 'https://www.olx.pl/d/oferta/pokoje-noclegi-zakopane-apartamenty-CID1816-ID15BqqL.html', 
         totalPrice: 3843, 
         availability: 'Brak Danych', 
         status: 'PeÅ‚na dostÄ™pnoÅ›Ä‡ i cena potwierdzona.', 
         capacity: 8, 
         amenities: [], 
         location: 'Zakopane', 
         distance: 1.5, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? GoÅ›cie: doroÅ›li (7), dzieci (1), niemowlÄ™ta (0).' },
            { sender: 'owner', message: 'Tak jest moÅ¼liwy ilu osobowe pokoje potrzeba' },
            { sender: 'user', message: 'Najlepiej dwa dwuosobowe i jeden czteroosobowy ale jeÅ›li dostÄ™pne sÄ… inne to jesteÅ›my elastyczni pod tym wzglÄ™dem :)' },
            { sender: 'owner', message: 'Wolny Apartament 4 os 2 pomieszczenia z wyposaÅ¼ona kuchniÄ… widokowy taras na gÃ³ry piÄ™kny widok tv internet cena 275zl doba za 4os.Pokoje 2os kaÅ¼dy z Å‚azienkÄ… widokowy balkon na gÃ³ry do dyspozycji na korytarzu aneks oraz kuchnia TV Internet grill parking plac zabaw cena 137zl doba za pokÃ³j 2os.' }
        ], latitude: 49.2991, longitude: 19.9575 }, 
        { id: 12, 
         title: 'Willa Monia - Zakopane PardaÅ‚Ã³wka 15-20 min. spacerkiem do KrupÃ³wek', 
         link: 'https://www.olx.pl/d/oferta/willa-monia-zakopane-pardalowka-15-20-min-spacerkiem-do-krupowek-CID1816-ID15zggt.html', 
         totalPrice: 7070, 
         availability: 'DostÄ™pny', 
         status: 'Cena i dostÄ™pnoÅ›Ä‡ potwierdzona.', 
         capacity: 8, 
         amenities: [], 
         location: 'Zakopane PardaÅ‚Ã³wka', 
         distance: 1.5, 
         notes: 'Cena 130 zÅ‚/osoba dorosÅ‚a, 100 zÅ‚/dziecko za dobÄ™. Ok. 15-20 min. spacerkiem do KrupÃ³wek.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025-02 sie, 2025 (7 nocy)? GoÅ›cie: doroÅ›li (7), dzieci (1) niemowlÄ™ta (0)' },
            { sender: 'owner', message: 'W podanym terminie mamy dostÄ™pne 3 pokoje 2 osobowe z Å‚Ã³Å¼kami maÅ‚Å¼eÅ„skimi + jedno z pojedynczym Å‚Ã³Å¼kiem. Koszt 130 zÅ‚ od osoby dorosÅ‚ej za dobÄ™, dziecko do 12 roku Å¼ycia 100 zÅ‚ za dobÄ™. W cenie wliczone jest Å›niadanie w formie szwedzkiego stoÅ‚u. Zapraszamy!' }
        ], latitude: 49.3039, longitude: 19.9880 },
        { id: 13, 
         title: 'Zakopane, pokoje z Å‚azienkÄ…, blisko centrum, KrupÃ³wki, do skoczni 300m', 
         link: 'https://www.olx.pl/d/oferta/zakopane-pokoje-z-lazienka-blisko-centrum-krupowki-do-skoczni-300m-CID1816-IDYCqId.html', 
         totalPrice: 4480, 
         availability: 'DostÄ™pny', 
         status: 'Cena i dostÄ™pnoÅ›Ä‡ potwierdzona.', 
         capacity: 8, 
         amenities: ['Åazienka', 'Halling'], 
         location: 'Zakopane, blisko centrum', 
         distance: 0.3, 
         notes: 'Cena 80 zÅ‚/osoba za dobÄ™. Do skoczni 300m, blisko KrupÃ³wek.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025-02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Witam. Mamy wolne pokoje w tym terminie w cenie 80 zÅ‚/osoba za dobÄ™. Dla goÅ›ci zmotoryzowanych mamy halling przy budynku, w tej cenie. W ofercie wczeÅ›niej innych zapytaÅ‚, chciaÅ‚bym prosiÄ‡ o uÅ¼ycie bezpoÅ›redniego kontaktu (jeÅ›li RODO nie trafi). Pozdrawiam Leszek Medowski' }
        ], latitude: 49.2980, longitude: 19.9580 }, 
        { id: 14, 
         title: 'WAKACJE-Apartament 2-10os, Blisko Centrum, Dworca PKP,PKS, Widok TATRY', 
         link: 'https://www.olx.pl/d/oferta/wakacje-apartament-2-10os-blisko-centru-m-dworca-pkp-pks-widok-tatry-CID1816-IDQrv4l.html', 
         totalPrice: null, 
         availability: 'Wymaga Potwierdzenia', 
         status: 'Brak potwierdzenia ceny w konwersacji. Proszono o kontakt telefoniczny.', 
         capacity: '2-10 osÃ³b', 
         amenities: ['Widok TATRY'], 
         location: 'Blisko Centrum, Dworca PKP, PKS', 
         distance: 0.8, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025-02 sie, 2025 (7 nocy)? GoÅ›cie: doroÅ›li (7), dzieci (1) niemowlÄ™ta (0)' },
            { sender: 'owner', message: 'Jest wolny proszÄ™ dzwoniÄ‡ na 500704655' }
        ], latitude: 49.2970, longitude: 19.9670 }, 
        { id: 15, 
         title: 'U Sobali - apartament z widokiem oraz pokoje goÅ›cinne, Ul. Mrowce 14', 
         link: 'https://www.olx.pl/d/oferta/u-sobali-apartament-z-widokiem-oraz-po-koje-goscinne-ul-mrowce-14-CID1816-IDzQfs5.html', 
         totalPrice: 3360, 
         availability: 'DostÄ™pny', 
         status: 'Cena potwierdzona (dla kombinacji pokoi), dostÄ™pnoÅ›Ä‡ potwierdzona.', 
         capacity: 8, 
         amenities: ['Widok'], 
         location: 'Ul. Mrowce 14', 
         distance: 3.5, 
         notes: 'Oferowane sÄ… pokoje 2os (125zÅ‚/dobÄ™) i 4os (230zÅ‚/dobÄ™). Cena obliczona dla 2 pokoi 2-osobowych i 1 4-osobowego.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)? GoÅ›cie: doroÅ›li (7), dzieci (1), niemowlÄ™ta (0).' },
            { sender: 'owner', message: 'A jakie Pokoje (ilu osobowe) PaÅ„stwo potrzebujÄ…?' },
            { sender: 'user', message: 'Najlepiej 2 dwuosobowe i 1 czteroosobowy ale jesteÅ›my elastyczni pod tym wzglÄ™dem :)' },
            { sender: 'owner', message: 'Dysponujemy  w tym terminie  pokojem  4 os z Å‚azienkÄ…  w  cenie  230 zÅ‚ za dobÄ™ od  caÅ‚ej rodziny  oraz 2 x 2 os z Å‚azienkami  w cenie  125 zÅ‚ za dobÄ™  za jeden pokÃ³j Pozdrawiam' }
        ], latitude: 49.2700, longitude: 19.9500 }, 
        { id: 16, 
         title: 'Wynajem Pokoi GoÅ›cinnych "Nowa GraÅ„"', 
         link: 'https://www.olx.pl/d/oferta/wynajem-pokoi-goscinnych-nowa-gran-CID1816-IDWLyHh.html', 
         totalPrice: 4200, 
         availability: 'CzÄ™Å›ciowo', 
         status: 'Cena i czÄ™Å›ciowa dostÄ™pnoÅ›Ä‡ potwierdzona.', 
         capacity: 8, 
         amenities: ['Åazienki', 'Balkony z widokiem'], 
         location: 'Zakopane', 
         distance: 2.2, 
         notes: 'DostÄ™pne, duÅ¼o informacji w konwersacji.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?,' },
            { sender: 'user', message: 'Dla 7 osob dorosÅ‚ych i jednego dziecka(10 lat)' },
            { sender: 'owner', message: 'Witam. A czy mogÅ‚oby byÄ‡ od 27 lipca? Czy termin jest potrzebny konkretnie od 26?' },
            { sender: 'user', message: 'WolelibyÅ›my od 26' },
            { sender: 'owner', message: 'Rozumiem, mam dostÄ™pne pokoje ale od 27 lipca' },
            { sender: 'user', message: 'W jakiej cenie byÅ‚y by te pokoje w takim razie od 27.07 do 03.08?' },
            { sender: 'owner', message: 'Od 26 lipca mam 2x pokÃ³j 2 osobowy oraz czteroosobowy. Cena w tym przypadku 75zÅ‚ za osobÄ™ za dobÄ™.ğŸ˜Š Nie sÄ… to pokoje z pokojami gÅ‚oszenia (pokoje sÄ… bez balkonÃ³w)' },
            { sender: 'owner', message: 'A od 27 lipca mam pokoje z ogÅ‚oszenia rÃ³wnieÅ¼ 2x dwuosobowego i czteroosobowy. Cena za 4 osobowy 300zÅ‚ za dobÄ™ za pokÃ³j, a cena pokoju 2 osobowego 180zÅ‚ za pokÃ³j za dobÄ™. Pokoje z prywatnymi Å‚azienkami, balkonami z widokiem na gÃ³ryğŸ˜Š' },
            { sender: 'owner', message: 'Oraz w obu opcjach kuchnia ogÃ³lnodostÄ™pna z ekspresem do kawy, piekarnikiem itd.' },
            { sender: 'owner', message: 'Za caÅ‚y pobyt: 1 opcja po zsumowaniu 4200zÅ‚, 2 opcja 4620zÅ‚. Zapraszam serdecznie Adres: ul.PardaÅ‚Ã³wka 60, Zakopane' }
        ], latitude: 49.3010, longitude: 19.9600 }, 
        { id: 17, 
         title: 'Drewniany domek z piÄ™knym widokiem na GubaÅ‚Ã³wce', 
         link: 'https://www.olx.pl/d/oferta/drewniany-domek-z-pieknym-widokiem-na-gubalowce-CID1816-ID10Rmvt.html', 
         totalPrice: 6000, 
         availability: 'DostÄ™pny', 
         status: 'Cena potwierdzona, termin czÄ™Å›ciowo pokrywa siÄ™ (dostÄ™pnoÅ›Ä‡ 26.07-03.08).', 
         capacity: null, 
         amenities: ['PiÄ™kny widok'], 
         location: 'GubaÅ‚Ã³wka', 
         distance: 4.0, 
         notes: 'Cena 6000zÅ‚ w innym domku. DostÄ™pny 26.07-03.08.2025 (8 nocy).', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? GoÅ›cie: doroÅ›li (7), dzieci (1), niemowlÄ™ta (0).' },
            { sender: 'owner', message: 'Witam. Ten domek jest wolny od 26.07 do 31.07' },
            { sender: 'owner', message: 'Ewentualnie w tym terminie mam wolny domek z piÄ™knym widokiem kominkiem saunÄ… i jacuzzi w Zakopanem' },
            { sender: 'owner', message: 'Zapraszam' },
            { sender: 'user', message: 'W jakiej cenie byÅ‚by ten dostÄ™pny domek?' },
            { sender: 'owner', message: '6000 zÅ‚ za caÅ‚y pobyt bqlia w cenie' },
        ], latitude: 49.3100, longitude: 19.9300 },
        { id: 18, 
         title: 'Nowe domki gÃ³rlaskie GubaÅ‚Ã³wka Zakopane (8 osÃ³b) z widokiem- wynajem', 
         link: 'https://www.olx.pl/d/oferta/nowe-domki-gorlaskie-gubalowka-zakopa-ne-8-osob-z-widokiem-wynajem-CID1816-IDZWnxE.html', 
         totalPrice: 4900, 
         availability: 'DostÄ™pny', 
         status: 'Cena i dostÄ™pnoÅ›Ä‡ potwierdzona.', 
         capacity: 8, 
         amenities: ['Widok'], 
         location: 'GubaÅ‚Ã³wka', 
         distance: 4.5, 
         notes: 'Cena 700 zÅ‚/noc za domek na wyÅ‚Ä…cznoÅ›Ä‡.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)? Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'DzieÅ„ dobry. Ten domek jest wolny w tym terminie. Cena za domek na wyÅ‚Ä…cznoÅ›Ä‡, wynosi w tym terminie 700 zÅ‚/noc.' }
        ], latitude: 49.3150, longitude: 19.9250 },
        { id: 19, 
         title: '"Domek u Paulinki" Zakopane Noclegi', 
         link: 'https://www.olx.pl/d/oferta/domek-u-paulinki-zakopane-noclegi-CID1816-IDv9Bfk.html', 
         totalPrice: null, 
         availability: 'Wymaga Potwierdzenia', 
         status: 'Wymaga potwierdzenia ceny i dostÄ™pnoÅ›ci. Proszono o kontakt telefoniczny.', 
         capacity: null, 
         amenities: [], 
         location: 'Zakopane', 
         distance: 2.8, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)? GoÅ›cie: doroÅ›li (7) dzieci (1) niemowlÄ™ta (0)' },
            { sender: 'owner', message: 'ProszÄ™ o kontakt telefoniczny pod numerem: 794108159' }
        ], latitude: 49.2900, longitude: 19.9600 }, 
        { id: 20, 
         title: 'Domek u "SockÃ³w" zapraszamy na Å›wiÄ™ta, majÃ³wkÄ™ i wakacje', 
         link: 'https://www.olx.pl/d/oferta/domek-u-sockow-zapraszamy-na-swieta-majowke-i-wakacje-CID1816-ID13nYkw.html', 
         totalPrice: 4550, 
         availability: 'DostÄ™pny', 
         status: 'Cena i dostÄ™pnoÅ›Ä‡ potwierdzona.', 
         capacity: 8, 
         amenities: [], 
         location: 'Zakopane', 
         distance: 3.2, 
         notes: 'Cena 700 zÅ‚/dobÄ™.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)? GoÅ›cie: doroÅ›li (7), dzieci (1), niemowlÄ™ta (0)' },
            { sender: 'owner', message: 'Witam serdecznie tak mamy wolny termin cena za dobÄ™ to 700zÅ‚ zapraszamy' },
             { sender: 'owner', message: 'Na zachÄ™tÄ™ ostatni nocleg  - 50 % taniej' }
        ], latitude: 49.2850, longitude: 19.9550 }, 
        { id: 21, 
         title: 'Prestige Apartamenty Bystra Woda Centrum Zakopane 1-8 osÃ³b', 
         link: 'https://www.olx.pl/d/oferta/prestige-apartamenty-bystra-woda-centrum-zakopane-1-8-osob-CID1816-IDqVpRj.html', 
         totalPrice: 5250, 
         availability: 'DostÄ™pny', 
         status: 'Cena i dostÄ™pnoÅ›Ä‡ potwierdzona.', 
         capacity: 8, 
         amenities: [], 
         location: 'Centrum Zakopane', 
         distance: 0.5, 
         notes: 'Cena 794 zÅ‚/doba.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)?' },
            { sender: 'owner', message: '750 zÅ‚doba' }
        ], latitude: 49.2995, longitude: 19.9585 }, 
        { id: 22, 
         title: 'Zakopane - pokoje w gÃ³rach - widoki na Tatry - Parking', 
         link: 'https://www.olx.pl/d/oferta/zakopane-pokoje-w-gorach-widoki-na-tatry-parking-CID1816-IDxTx4h.html', 
         totalPrice: null, 
         availability: 'Brak Danych', 
         status: 'Brak konwersacji/danych do potwierdzenia.', 
         capacity: null, 
         amenities: ['Widoki na Tatry', 'Parking'], 
         location: 'Zakopane (w gÃ³rach)', 
         distance: 6.0, 
         notes: '', 
         chatContent: [
            { sender: 'system', message: 'Brak konwersacji w pliku PDF dla tej oferty.' }
        ], latitude: 49.2700, longitude: 19.9700 }, 
        { id: 23, 
         title: 'Zapraszamy do Villa Baja wolne pokoje 3km centrum', 
         link: 'https://www.olx.pl/d/oferta/zapraszamy-do-villa-baja-wolne-pokoje-3km-centrum-CID1816-IDNv0DD.html', 
         totalPrice: 4200, 
         availability: 'DostÄ™pny', 
         status: 'Cena i dostÄ™pnoÅ›Ä‡ potwierdzona.', 
         capacity: 8, 
         amenities: [], 
         location: '3km od centrum', 
         distance: 3, 
         notes: 'Cena 75 zÅ‚/osoba/dobÄ™.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? GoÅ›cie: doroÅ›li (7), dzieci (1), niemowlÄ™ta (0).' },
            { sender: 'owner', message: 'owner' },
            { sender: 'user', message: 'Jakie pokoje potrzebujecie?' },
            { sender: 'user', message: 'Najlepiej dwa dwuosobowe i jeden czterosobowy ale jesteÅ›my elastyczni pod tym wzglÄ™dem :)' },
            { sender: 'owner', message: 'Posiadamy wolne pokoje' },
            { sender: 'owner', message: 'Dwa dwu osobowe oraz jeden 4 osobowy' },
            { sender: 'user', message: 'w jakiej cenie?' },
            { sender: 'owner', message: 'Z Å›niadaniem obiadem ?' },
            { sender: 'user', message: 'WstÄ™pnie bez Å›niadaÅ„ i obiadÃ³w' },
            { sender: 'owner', message: 'Na 7 nocy chcecie ?' },
            { sender: 'owner', message: '75 zÅ‚ od osoby' },
            { sender: 'owner', message: 'Za nocleg' }
        ], latitude: 49.3050, longitude: 19.9400 }, 
        { id: 24, 
         title: 'Apartamenty Zakopane NajbliÅ¼sze Szlaki 350m ! WOLNE ! OBIADY 25ZÅ', 
         link: 'https://www.olx.pl/d/oferta/apartamenty-zakopane-najblizsze-szlaki-350m-wolne-obiady-25zlCID1816-IDjpzbi.html', 
         totalPrice: 3780, 
         availability: 'DostÄ™pny', 
         status: 'DostÄ™pne.', 
         capacity: 8, 
         amenities: ['Obiady 25zÅ‚'], 
         location: 'NajbliÅ¼sze Szlaki 350m', 
         distance: 0.35, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)? Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Witam tak. 270zl doba nr 14. Pozdrawiam Damian Apartamenty Dwa NiedÅºwiedzie.' },
            { sender: 'owner', message: 'Przepraszam zapomniaÅ‚em dopisaÄ‡ 13 i 14 po 270 doba. Lub niÅ¼ej 11 i 3 po 300zÅ‚ doba. Apartamenty sÄ… dla maksymalnie 4 osÃ³b.' }
        ], latitude: 49.2985, longitude: 19.9600 }, 
        { id: 25, 
         title: 'Apartament w gÃ³rach z widokiem na gÃ³ry blisko term i szlakÃ³w dla rodzin', 
         link: 'https://www.olx.pl/d/oferta/apartament-w-gorach-z-widokiem-na-gory-bisko-term-i-szlakow-dla-rodzin-CID1816-ID16aFoq.html', 
         totalPrice: 5600, 
         availability: 'Wymaga Potwierdzenia', 
         status: 'Brak jednoznacznej ceny i dostÄ™pnoÅ›ci dla grupy 8-osobowej. Informacje w konwersacji sÄ… niejasne i sprzeczne.', 
         capacity: 8, 
         amenities: ['Widok na gÃ³ry', 'Blisko term i szlakÃ³w', 'Basen', 'Jacuzzi'], 
         location: 'W gÃ³rach', 
         distance: 5.5, 
         notes: 'Informacje o cenie i dostÄ™pnoÅ›ci w konwersacji sÄ… niejasne i sprzeczne.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'PokÃ³j 4 osobowy standard trzylatek. balkon. Widok z Å‚azienki na Tatry. Zachodzony w cenie 90 zÅ‚/osoba/noc. dziecko, poniÅ¼ej lat 10- ceny w cenie 63 zÅ‚/noc.pokÃ³j 4 osobowy standard z Å‚azienkÄ…, balkonem i widokiem z balkonu na Tatry Zachodnie w cenie 90 zÅ‚/osoba/noc, dziecko poniÅ¼ej lat 10-ciu w cenie 63 zÅ‚/noc' },
            { sender: 'owner', message: 'GÃ³ralski Sen dla 4 osÃ³b z aneksem kuchennym, Å‚azienkÄ…, bujanym hamakiem, dwoma balkonami i  bezpoÅ›rednim widokiem na caÅ‚Ä… panoramÄ™ Tatr w cenie 115 zÅ‚/osoba/noc, dziecko poniÅ¼ej lat 10-ciu w cenie 81 zÅ‚/noc' }
        ], latitude: 49.2750, longitude: 19.9400 }, 
        { id: 26, 
         title: 'Zakopane!!! Pokoje, noclegi w Centrum!!! BoÅ¼e CiaÅ‚o, WAKACJE 2025', 
         link: 'https://www.olx.pl/d/oferta/zakopane-pokoje-noclegi-w-centrum-boze-cialo-wakacje-2025-CID1816-ID1foBh.html', 
         totalPrice: null, 
         availability: 'Wymaga Potwierdzenia', 
         status: 'Brak potwierdzenia ceny i dostÄ™pnoÅ›ci. Proszono o kontakt telefoniczny.', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego', 
         distance: 0.7, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 02 sie 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Zapraszam do kontaktu telefonicznego (603444718) Moja mama zajmuje siÄ™ pensjonatem a ja tylko odpowiadam na wiadomoÅ›ci' }
        ], latitude: 49.2990, longitude: 19.9570 }, 
        { id: 27, 
         title: 'Dom na wyÅ‚Ä…cznoÅ›Ä‡ jacuzzi ,Å›wiÄ™ta', 
         link: 'https://www.olx.pl/d/oferta/dom-na-wylacznosc-jacuzzi-swieta-CID1816-ID12cf5V.html', 
         totalPrice: 3920, 
         availability: 'DostÄ™pny', 
         status: 'DostÄ™pnoÅ›Ä‡ od 27 lipca Dom, pokoje od 26', 
         capacity: null, 
         amenities: ['Jacuzzi'], 
         location: 'Zakopane', 
         distance: 2.9, 
         notes: 'Brak ceny dla terminu. MoÅ¼liwe wynajÄ™cie pokoi od 26 lipca.', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip 2025 - 2 sie 2025 (7 nocy)? GoÅ›cie: doroÅ›li (7), dzieci (1) niemowlÄ™ta (0).' },
            { sender: 'owner', message: 'Domek wolny od 27 lipca ewentualnie pokoje od 26 lipca sÄ… dostÄ™pne.' },
            { sender: 'user', message: 'Jaka by byÅ‚a cena za pokoje 102 dwa dwuosobowe i jeden czteroosobowy. Jaka byÅ‚aby cena za dom na wyÅ‚Ä…cznoÅ›Ä‡? (27-02.08)' },
            { sender: 'owner', message: 'Cena za domek 1200zl  Domek Gabi zdjecia na stronie' },
            { sender: 'owner', message: 'Cena za pokÃ³j 70 zÅ‚ nocleg od osoby' }
        ], latitude: 49.2900, longitude: 19.9500 }, 
        { id: 28, 
         title: 'Domki pod lasem WYNAJEM Domek', 
         link: 'https://www.olx.pl/d/oferta/domki-pod-lasem-wynajem-domek-CID1816-IDwnlvP.html', 
         totalPrice: 3500, 
         availability: 'DostÄ™pny', 
         status: 'DostÄ™pny, 500zl doba', 
         capacity: 8, 
         amenities: [], 
         location: 'Pod lasem', 
         distance: 4.8, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)? GoÅ›cie: doroÅ›li (7), dzieci (1) niemowlÄ™ta (0)' },
            { sender: 'owner', message: 'Witam mam wolne zapraszam' },
            { sender: 'user', message: 'W jakiej cenie?' },
            { sender: 'owner', message: '500 za dobÄ™' }
        ], latitude: 49.2800, longitude: 19.9800 }, 
        { id: 29, 
         title: 'Domek w centrum Zakopanego, ul Tetmajera, Tatry', 
         link: 'https://www.olx.pl/d/oferta/domek-w-centrum-zakopanego-ul-tetmajera-tatry-CID1816-IDGdv-s9.html', 
         totalPrice: null, 
         availability: 'DostÄ™pny', 
         status: 'Brak potwierdzenia ceny w konwersacji. Wymaga dalszego kontaktu.', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Mamy jeszcze wolny termin' },
            { sender: 'user', message: 'W jakiej cenie?' }
        ], latitude: 49.3000, longitude: 19.9650 }, 
        { id: 30, 
         title: 'Wynajem pokoi i apartamentÃ³w Zakopane ul.KrÃ³le 1a', 
         link: 'https://www.olx.pl/d/oferta/wynajem-pokoi-i-apartamentow-zakopane-ul-krole-1a-CID1816-ID16ahB4.html', 
         totalPrice: 3920, 
         availability: 'DostÄ™pny', 
         status: 'DostÄ™pny, 80zÅ‚ os/doba', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Witam' },
            { sender: 'owner', message: 'A iloÅ›Ä‡ pokoi jaka paÅ„stwa interesuje?' },
            { sender: 'user', message: 'Np. 2 dwuosobowe i 1 czteroosobowy ale jesteÅ›my elastyczni pod tym wzglÄ™dem jeÅ›li takie nie sÄ… dotÄ™pne' },
            { sender: 'owner', message: 'No tak mamy dwa dwuosobowe i jedna czwÃ³rkÄ™' },
            { sender: 'user', message: 'jaka byÅ‚aby cena?' },
            { sender: 'owner', message: '80 zÅ‚ doba od osoby' }
        ], latitude: 49.3000, longitude: 19.9650 }, 
        { id: 31, 
         title: 'Domek GÃ³ralski z widokiem na gÃ³ry blisko Term BiaÅ‚ka Bukowina ognisko', 
         link: 'https://www.olx.pl/d/oferta/domek-goralski-z-widokiem-na-gory-blisko-term-bialka-bukowina-ognisko-CID1816-ID169qH4.html?isPreviewActive=0&sliderIndex=4', 
         totalPrice: 4200, 
         availability: 'CzÄ™Å›ciowo', 
         status: 'dostepny od 29 lipca', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Witam domek mam dostÄ™pny do 29 lipca cena za dobre 600 zÅ‚' }
        ], latitude: 49.3000, longitude: 19.9650 }, 
        { id: 32, 
         title: 'Zakopane, apartamenty, pokoje goÅ›cinne, centrum, blisko do szlakÃ³w.', 
         link: 'https://www.olx.pl/d/oferta/zakopane-apartamenty-pokoje-goscinne-centrum-blisko-do-szlakow-CID1816-IDPbuNi.html', 
         totalPrice: 3920, 
         availability: 'DostÄ™pny', 
         status: 'DostÄ™pny', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Witam. Mamy wolne pokoje w tym terminie w cenie 80 zÅ‚/osoba za dobÄ™.  Dla goÅ›ci zmotoryzowanych mamy parking przy budynku w tej cenie.  W sprawie wszelkich innych zapytaÅ„ oraz rezerwacji proszÄ™ dzwoniÄ‡ bezpoÅ›rednio do gospodyni pod nr. (ukryte informacje)  Pozdrawiam Leszek Medrzycki' }
        ], latitude: 49.3000, longitude: 19.9650 }, 
        { id: 33, 
         title: 'Nocleg Komfortowe Pokoje GÃ“RY, Dom do wynajÄ™cia', 
         link: 'https://www.olx.pl/d/oferta/nocleg-komfortowe-pokoje-gory-dom-do-wynajecia-CID1816-IDliY30.html', 
         totalPrice: null, 
         availability: 'DostÄ™pny', 
         status: 'DostÄ™pny', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Tak proszÄ™ o kontakt  telefoniczny (ukryte informacje)' }
        ], latitude: 49.3000, longitude: 19.9650 }, 
        { id: 34, 
         title: 'Willa Wojcias Zapraszamy!!!', 
         link: 'https://www.olx.pl/d/oferta/willa-wojcias-zapraszamy-CID1816-IDKMIsT.html?chat=1&isPreviewActive=0', 
         totalPrice: 3640, 
         availability: 'DostÄ™pny', 
         status: 'DostÄ™pny', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Witam a ilu osobowe potrzebujecie pokoje' },
            { sender: 'user', message: 'Najlepiej 2 dwuosobowe i 1 czteroosobowy jesli jest taka mozliwosc ale jestesmy elastyczni w tej kwestii' },
            { sender: 'owner', message: 'Bylyby dostÄ™pne takie pokoje zapraszam rezerwacja pod numerem 505 847 214' },
            { sender: 'user', message: 'jaka byÅ‚aby cena za te pokoje?' },
            { sender: 'owner', message: 'Nocleg 65 zl od osoby' }
        ], latitude: 49.3000, longitude: 19.9650 }, 
        { id: 35, 
         title: 'Pokoje Apartament u Bartka', 
         link: 'https://www.olx.pl/d/oferta/pokoje-apartament-u-bartka-CID1816-IDwwzz1.html?chat=1&isPreviewActive=0', 
         totalPrice: 2800, 
         availability: '2800 za pokoje dla wszystkich, 3300 za apartament', 
         status: 'DostÄ™pny', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Witam a ilu osobowe potrzebujecie pokoje' },
            { sender: 'user', message: 'Najlepiej apartament  lub 2 pokoje dwuosobowe i 1 czteroosobowy' },
            { sender: 'owner', message: 'Apartament 3300zl' },
            { sender: 'owner', message: 'Pokoje 2800 zÅ‚ za caÅ‚y pobyt od wszystkich' }
        ], latitude: 49.3000, longitude: 19.9650 }, 
        { id: 36, 
         title: 'Pokoje GoÅ›cinne Nocleg w GÃ³rach Zakopane Poronin Tanio Kwatery Wakacje', 
         link: 'https://www.olx.pl/d/oferta/pokoje-goscinne-nocleg-w-gorach-zakopane-poronin-tanio-kwatery-wakacje-CID1816-IDmTCd8.html', 
         totalPrice: 2800, 
         availability: '2800 za pokoje', 
         status: 'DostÄ™pny', 
         capacity: null, 
         amenities: [], 
         location: 'Centrum Zakopanego, ul. Tetmajera', 
         distance: 1.2, 
         notes: '', 
         chatContent: [
            { sender: 'user', message: 'Czy wynajem jest moÅ¼liwy w dniach 26 lip, 2025 - 02 sie, 2025 (7 nocy)?' },
            { sender: 'user', message: 'Dla 7 dorosÅ‚ych i jednego dziecka' },
            { sender: 'owner', message: 'Witam MiaÅ‚bym wolny pokÃ³j trzyosobowy i czteroosobowy obok siebie na tym samym piÄ™trze gdzie byli by paÅ„stwo sami w cenie 50 zÅ‚otych od osoby za noc' }
        ], latitude: 49.3000, longitude: 19.9650 }              
    ];

    const offersGrid = document.getElementById('offers-grid');
    const availabilityFilter = document.getElementById('availability-filter');
    const sortBy = document.getElementById('sort-by');

    let activeFilters = [];

    // Modal elements for chat
    const chatModal = document.getElementById('chatModal');
    const chatModalTitle = document.getElementById('chatModalTitle');
    const chatMessagesContainer = document.getElementById('chatMessages');
    const modalClose = document.getElementsByClassName('modal-close')[0];

    const getStatusColor = (availability) => {
        switch (availability) {
            case 'DostÄ™pny': return 'text-green-600 bg-green-100';
            case 'CzÄ™Å›ciowo': return 'text-yellow-600 bg-yellow-100';
            case 'Wymaga Potwierdzenia': return 'text-blue-600 bg-blue-100';
            case 'Brak Danych': return 'text-red-600 bg-red-100';
            default: return 'text-gray-600 bg-gray-100';
        }
    };

    const renderOffers = () => {
        let filteredData = [...accommodationData];

        if (activeFilters.length > 0) {
            filteredData = filteredData.filter(offer => activeFilters.includes(offer.availability));
        }

        const sortValue = sortBy.value;
        filteredData.sort((a, b) => {
            switch (sortValue) {
                case 'price_asc':
                    return (a.totalPrice || Infinity) - (b.totalPrice || Infinity);
                case 'price_desc':
                    return (b.totalPrice || -Infinity) - (a.totalPrice || -Infinity);
                case 'dist_asc':
                    return (a.distance || Infinity) - (b.distance || Infinity);
                case 'dist_desc':
                    return (b.distance || -Infinity) - (a.distance || -Infinity);
                default:
                    return 0;
            }
        });
        
        offersGrid.innerHTML = '';
        if (filteredData.length === 0) {
             offersGrid.innerHTML = `<p class="text-center col-span-full text-gray-500">Brak ofert speÅ‚niajÄ…cych wybrane kryteria.</p>`;
             return;
        }
        
        filteredData.forEach(offer => {
            const card = document.createElement('div');
            card.className = 'card bg-white rounded-2xl shadow-md overflow-hidden flex flex-col';
            card.innerHTML = `
                <div class="p-6 flex-grow">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-xs font-semibold py-1 px-3 rounded-full ${getStatusColor(offer.availability)}">${offer.availability}</span>
                        <p class="text-2xl font-bold text-[#2F5233]">${offer.totalPrice ? `${offer.totalPrice} zÅ‚` : 'Cena ?'}</p>
                    </div>
                    <h4 class="text-lg font-bold mb-2 h-14">${offer.title}</h4>
                    <div class="text-sm text-gray-500 mb-4 space-y-1">
                        <p>ğŸ“ Lokalizacja: <span class="font-medium text-gray-700">${offer.location || 'Nieznana'}</span></p>
                        <p>ğŸš— Do KrupÃ³wek: <span class="font-medium text-gray-700">${offer.distance !== null ? `~${offer.distance} km` : 'Nieznana'}</span></p>
                        <p>ğŸ‘¥ PojemnoÅ›Ä‡: <span class="font-medium text-gray-700">${offer.capacity ? `${offer.capacity} osÃ³b` : 'Nieznana'}</span></p>
                    </div>
                     <div class="text-sm text-gray-600 mb-4">
                        <p><span class="font-semibold">Status:</span> ${offer.status}</p>
                        ${offer.notes ? `<p class="mt-1"><span class="font-semibold">Notatki:</span> ${offer.notes}</p>` : ''}
                    </div>
                </div>
                <div class="p-6 bg-gray-50 border-t border-gray-200">
                    <button class="w-full text-center block bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors open-chat-modal-btn" data-offer-id="${offer.id}">
                        PokaÅ¼ KonwersacjÄ™
                    </button>
                </div>
                <div class="p-6 bg-gray-50 border-t border-gray-200">
                    <a href="${offer.link}" target="_blank" rel="noopener noreferrer" class="w-full text-center block bg-[#4A7856] text-white font-bold py-2 px-4 rounded-lg hover:bg-[#2F5233] transition-colors">
                        Zobacz OfertÄ™ na OLX
                    </a>
                </div>
            `;
            offersGrid.appendChild(card);
        });

        // Add event listeners for chat modal buttons
        document.querySelectorAll('.open-chat-modal-btn').forEach(button => {
            button.addEventListener('click', function() {
                const offerId = parseInt(this.dataset.offerId);
                const offer = accommodationData.find(o => o.id === offerId);
                if (offer && offer.chatContent) {
                    chatModalTitle.textContent = `Konwersacja dla: ${offer.title}`;
                    chatMessagesContainer.innerHTML = ''; // Clear previous messages
                    offer.chatContent.forEach(chatMsg => {
                        const msgDiv = document.createElement('div');
                        msgDiv.className = `chat-message ${chatMsg.sender === 'user' ? 'chat-user' : 'chat-owner'}`;
                        msgDiv.textContent = chatMsg.message;
                        chatMessagesContainer.appendChild(msgDiv);
                    });
                    chatModal.style.display = 'flex'; // Show modal
                }
            });
        });
    };

    // Close the modal when clicking on the close button or outside the content
    modalClose.addEventListener('click', () => {
        chatModal.style.display = 'none';
    });
    chatModal.addEventListener('click', (e) => {
        if (e.target === chatModal) {
            chatModal.style.display = 'none';
        }
    });

    availabilityFilter.addEventListener('click', (e) => {
        if (e.target.tagName === 'BUTTON') {
            const filter = e.target.dataset.filter;
            e.target.classList.toggle('active');
            if (activeFilters.includes(filter)) {
                activeFilters = activeFilters.filter(f => f !== filter);
            } else {
                activeFilters.push(filter);
            }
            renderOffers();
        }
    });

    sortBy.addEventListener('change', renderOffers);

    const renderCharts = () => {
        // Clear previous charts if they exist
        const priceChartCanvas = document.getElementById('priceChart');
        const distanceChartCanvas = document.getElementById('distanceChart');
        if (priceChartCanvas.chart) {
            priceChartCanvas.chart.destroy();
        }
        if (distanceChartCanvas.chart) {
            distanceChartCanvas.chart.destroy();
        }

        const confirmedPriceData = accommodationData.filter(d => d.totalPrice && d.availability === 'DostÄ™pny');
        const knownDistanceData = accommodationData.filter(d => d.distance !== null && !isNaN(d.distance));
        
        priceChartCanvas.chart = new Chart(priceChartCanvas, {
            type: 'bar',
            data: {
                labels: confirmedPriceData.map(d => d.title.substring(0,25) + (d.title.length > 25 ? '...' : '')),
                datasets: [{
                    label: 'Cena caÅ‚kowita (zÅ‚)',
                    data: confirmedPriceData.map(d => d.totalPrice),
                    backgroundColor: '#4A7856',
                    borderColor: '#2F5233',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: {
                    x: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });

        distanceChartCanvas.chart = new Chart(distanceChartCanvas, {
            type: 'bar',
            data: {
                labels: knownDistanceData.map(d => d.title.substring(0,25) + (d.title.length > 25 ? '...' : '')),
                datasets: [{
                    label: 'OdlegÅ‚oÅ›Ä‡ od KrupÃ³wek (km)',
                    data: knownDistanceData.map(d => d.distance),
                    backgroundColor: '#A2B8A6',
                    borderColor: '#6E8B74',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: {
                    x: {
                        beginAtZero: true
                    }
                },
                 plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    };

    // Initialize the map after the DOM is loaded
    const initMap = () => {
        const map = L.map('map').setView([49.2991, 19.9575], 12); // Centered on KrupÃ³wki, Zakopane

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Add markers for each accommodation with known coordinates
        accommodationData.forEach(offer => {
            if (offer.latitude && offer.longitude) {
                L.marker([offer.latitude, offer.longitude])
                    .addTo(map)
                    .bindPopup(`<b>${offer.title}</b><br>${offer.location || 'Zakopane'}<br>${offer.distance !== null ? `~${offer.distance} km od KrupÃ³wek` : 'OdlegÅ‚oÅ›Ä‡ nieznana'}`);
            }
        });
         // Add a marker for KrupÃ³wki itself
        L.marker([49.2991, 19.9575], {
            icon: L.divIcon({
                className: 'my-custom-icon',
                html: '<div class="bg-red-600 text-white rounded-full p-1 text-xs font-bold text-center" style="min-width: 50px;">KrupÃ³wki</div>',
                iconSize: [60, 20], // size of the icon
                iconAnchor: [30, 10] // point of the icon which will correspond to marker's location
            })
        }).addTo(map)
        .bindPopup('<b>KrupÃ³wki</b><br>Centrum Zakopanego');
    };


    renderOffers();
    renderCharts();
    initMap(); // Call initMap to render the map
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });
});
</script>

</body>
</html>
